module.exports=[78534,a=>{"use strict";var b=a.i(69580);let c={primary:"bg-ctp-blue text-ctp-crust font-medium hover:bg-ctp-lavender active:bg-ctp-sapphire",ghost:"bg-ctp-surface0 text-ctp-subtext1 hover:bg-ctp-surface1 hover:text-ctp-text active:bg-ctp-surface2",danger:"bg-ctp-red/15 text-ctp-red hover:bg-ctp-red/25 active:bg-ctp-red/35"};function d({variant:a="primary",children:d,className:e="",disabled:f,...g}){return(0,b.jsx)("button",{className:`px-4 py-2 rounded-input text-sm transition-colors duration-150 cursor-pointer disabled:opacity-40 disabled:cursor-not-allowed ${c[a]} ${e}`,disabled:f,...g,children:d})}a.s(["Button",()=>d])},16098,a=>{"use strict";var b=a.i(69580),c=a.i(89930),d=a.i(78301);function e({title:a,icon:e,children:f,className:g,noPadding:h}){let i=(0,d.useRouter)(),[j,k]=(0,c.useState)(!1);return(0,b.jsxs)("div",{className:`flex flex-col bg-ctp-mantle border border-ctp-surface0 rounded-window shadow-lg shadow-black/20 overflow-hidden ${g??""}`,children:[(0,b.jsxs)("div",{className:"window-titlebar shrink-0",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1.5 mr-2",children:[(0,b.jsx)("button",{onClick:()=>i.push("/"),className:"w-3 h-3 rounded-full bg-ctp-red hover:brightness-110 transition-all",title:"Close â€” go to desktop"}),(0,b.jsx)("button",{onClick:()=>k(!j),className:"w-3 h-3 rounded-full bg-ctp-yellow hover:brightness-110 transition-all",title:j?"Restore":"Minimize"}),(0,b.jsx)("button",{onClick:()=>k(!1),className:"w-3 h-3 rounded-full bg-ctp-green hover:brightness-110 transition-all",title:"Maximize"})]}),e&&(0,b.jsx)("span",{className:"text-ctp-subtext0",children:e}),(0,b.jsx)("span",{className:"text-xs font-mono font-medium text-ctp-subtext1 truncate",children:a})]}),!j&&(0,b.jsx)("div",{className:`flex-1 overflow-auto ${h?"":"p-4"}`,children:f}),j&&(0,b.jsx)("div",{className:"px-4 py-6 text-center",children:(0,b.jsx)("button",{onClick:()=>k(!1),className:"text-xs font-mono text-ctp-overlay0 hover:text-ctp-text transition-colors",children:"Click to restore window"})})]})}a.s(["Window",()=>e])},1732,a=>{"use strict";var b=a.i(69580);function c({message:a,hint:c,className:d=""}){return(0,b.jsxs)("div",{className:`py-8 text-center font-mono ${d}`,children:[(0,b.jsx)("div",{className:"text-sm text-ctp-overlay0",children:a}),c&&(0,b.jsx)("div",{className:"text-xs text-ctp-overlay0/70 mt-1",children:c})]})}a.s(["EmptyState",()=>c])},31317,a=>{"use strict";var b=a.i(69580),c=a.i(89930),d=a.i(16098);function e({message:a}){let c="user"===a.role;return(0,b.jsxs)("div",{className:"mb-3 font-mono",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-xs mb-0.5",children:[(0,b.jsx)("span",{className:c?"text-ctp-green":"text-ctp-mauve",children:c?"user $":`${a.agentName||"system"} >`}),(0,b.jsx)("span",{className:"text-ctp-overlay0 text-2xs",children:a.timestamp}),a.model&&(0,b.jsxs)("span",{className:"text-ctp-overlay0 text-2xs",children:["[",a.model,"]"]})]}),(0,b.jsxs)("div",{className:"pl-4 text-sm text-ctp-text whitespace-pre-wrap break-words",children:[a.content,a.streaming&&(0,b.jsx)("span",{className:"inline-block w-2 h-4 ml-0.5 bg-ctp-green animate-pulse"})]}),a.usage&&(0,b.jsxs)("div",{className:"pl-4 mt-1 text-2xs text-ctp-overlay0",children:[a.usage.totalTokens," tokens"]})]})}var f=a.i(1732);function g({messages:a}){let d=(0,c.useRef)(null);return((0,c.useEffect)(()=>{d.current?.scrollIntoView({behavior:"smooth"})},[a]),a.length)?(0,b.jsxs)("div",{className:"flex-1 overflow-y-auto px-4 py-3 font-mono",children:[a.map(a=>(0,b.jsx)(e,{message:a},a.id)),(0,b.jsx)("div",{ref:d})]}):(0,b.jsx)("div",{className:"flex-1 flex items-center justify-center h-full",children:(0,b.jsx)(f.EmptyState,{message:"$ Type a command to begin..."})})}function h({onSend:a,disabled:d}){let[e,f]=(0,c.useState)(""),g=(0,c.useRef)(null),h=(0,c.useCallback)(()=>{let b=e.trim();b&&!d&&(a(b),f(""),g.current&&(g.current.style.height="auto"))},[e,d,a]),i=(0,c.useCallback)(a=>{"Enter"!==a.key||a.shiftKey||(a.preventDefault(),h())},[h]),j=(0,c.useCallback)(()=>{g.current&&(g.current.style.height="auto",g.current.style.height=`${Math.min(g.current.scrollHeight,200)}px`)},[]);return(0,b.jsxs)("div",{className:"flex items-end gap-2 px-4 py-2 font-mono",children:[(0,b.jsx)("span",{className:"text-ctp-green text-sm py-1.5 select-none",children:"$"}),(0,b.jsx)("textarea",{ref:g,value:e,onChange:a=>{f(a.target.value),j()},onKeyDown:i,placeholder:"Enter command...",rows:1,disabled:d,className:"flex-1 bg-transparent text-sm text-ctp-text placeholder:text-ctp-overlay0 resize-none focus:outline-none disabled:opacity-40 min-h-[36px] max-h-[200px] font-mono"}),(0,b.jsx)("button",{onClick:h,disabled:d||!e.trim(),className:"px-3 py-1.5 rounded-input bg-ctp-blue text-ctp-crust text-xs font-mono font-medium hover:bg-ctp-lavender disabled:opacity-40 disabled:cursor-not-allowed transition-colors shrink-0",children:"send"})]})}function i({agents:a,selectedId:c,onSelect:d}){return(0,b.jsxs)("div",{className:"flex items-center gap-2 font-mono",children:[(0,b.jsx)("label",{className:"text-xs text-ctp-overlay0",children:"target:"}),(0,b.jsxs)("select",{value:c||"",onChange:a=>d(a.target.value||null),className:"bg-ctp-surface0 border border-ctp-surface1 rounded-input px-2 py-1 text-xs text-ctp-text focus:outline-none focus:border-ctp-blue/50 transition-colors",children:[(0,b.jsx)("option",{value:"",className:"bg-ctp-mantle",children:"Direct LLM"}),a.map(a=>(0,b.jsxs)("option",{value:a.id,className:"bg-ctp-mantle",children:[a.name||a.id," (",a.externalId||a.id,")"]},a.id))]})]})}var j=a.i(78534),k=a.i(36146),l=a.i(95074);function m(){let{status:a}=(0,k.useWebSocket)(),{messages:e,streaming:f,sendMessage:m,clearMessages:n}=function(){let{sendStreamingChat:a,sendAgentTask:b,operatorAgentId:d}=(0,k.useWebSocket)(),[e,f]=(0,c.useState)([]),[g,h]=(0,c.useState)(!1),i=(0,c.useCallback)(async(c,g)=>{let i={id:`user-${Date.now()}`,role:"user",content:c,timestamp:new Date().toLocaleTimeString()};f(a=>[...a,i]);let j=`assistant-${Date.now()}`,k={id:j,role:"assistant",content:"",streaming:!0,timestamp:new Date().toLocaleTimeString(),agentName:g?.agentName};f(a=>[...a,k]),h(!0);try{let h=g?.agentId||d;if(h){let a=await b(h,{type:"chat",messages:[{role:"user",content:c}]});f(b=>b.map(b=>b.id===j?{...b,content:a?.content||"No response",model:a?.model,streaming:!1}:b))}else{let b=[...e.filter(a=>!a.streaming).map(a=>({role:a.role,content:a.content})),{role:"user",content:c}],d=await a(b,a=>{f(b=>b.map(b=>b.id===j?{...b,content:b.content+a}:b))},{model:g?.model});f(a=>a.map(a=>a.id===j?{...a,content:d.content,model:d.model,usage:d.usage,streaming:!1}:a))}}catch(a){f(b=>b.map(b=>b.id===j?{...b,content:`Error: ${a instanceof Error?a.message:"Unknown error"}`,streaming:!1}:b))}finally{h(!1)}},[e,a,b,d]);return{messages:e,streaming:g,sendMessage:i,clearMessages:(0,c.useCallback)(()=>{f([])},[])}}(),{agents:o}=(0,l.useAgents)(),[p,q]=(0,c.useState)(null),r=o.find(a=>a.id===p);return(0,b.jsx)(d.Window,{title:"Terminal",icon:(0,b.jsxs)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[(0,b.jsx)("polyline",{points:"4 17 10 11 4 5"}),(0,b.jsx)("line",{x1:"12",y1:"19",x2:"20",y2:"19"})]}),noPadding:!0,className:"h-full",children:(0,b.jsxs)("div",{className:"flex flex-col h-full terminal-bg",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between px-3 py-2 border-b border-ctp-surface0 bg-ctp-crust/50",children:[(0,b.jsx)(i,{agents:o,selectedId:p,onSelect:q}),e.length>0&&(0,b.jsx)(j.Button,{variant:"ghost",onClick:n,className:"text-xs",children:"clear"})]}),(0,b.jsx)("div",{className:"flex-1 overflow-hidden",children:(0,b.jsx)(g,{messages:e})}),(0,b.jsx)("div",{className:"border-t border-ctp-surface0",children:(0,b.jsx)(h,{onSend:a=>{m(a,{agentId:p||void 0,agentName:r?.name})},disabled:"connected"!==a||f})})]})})}a.s(["default",()=>m],31317)}];

//# sourceMappingURL=apps_dashboard_src_f43ac932._.js.map