module.exports=[80905,a=>{"use strict";var b=a.i(69580),c=a.i(35271),d=a.i(89930),e=a.i(36146),f=a.i(95074);function g(){let{status:a}=(0,e.useWebSocket)(),{agents:c}=(0,f.useAgents)(),[g,h]=(0,d.useState)("");(0,d.useEffect)(()=>{let a=()=>{h(new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))};a();let b=setInterval(a,3e4);return()=>clearInterval(b)},[]);let i=c.filter(a=>"running"===a.state||"ready"===a.state).length,j="connected"===a?"bg-ctp-green":"auth_failed"===a?"bg-ctp-red":"bg-ctp-yellow";return(0,b.jsxs)("div",{className:"flex items-center gap-4 text-xs font-mono text-ctp-subtext0",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1.5",title:`Gateway: ${a}`,children:[(0,b.jsx)("span",{className:`w-2 h-2 rounded-full ${j}`}),(0,b.jsx)("span",{className:"hidden sm:inline",children:a})]}),(0,b.jsxs)("div",{className:"flex items-center gap-1.5",title:`${i} agent(s) running`,children:[(0,b.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 16 16",fill:"currentColor",children:(0,b.jsx)("path",{d:"M5 3a3 3 0 1 1 6 0 3 3 0 0 1-6 0zm-1 8a4 4 0 0 1 8 0v1H4v-1z"})}),(0,b.jsx)("span",{children:i})]}),(0,b.jsx)("div",{className:"text-ctp-subtext1 font-medium tabular-nums",children:g})]})}function h(){return(0,b.jsxs)("header",{className:"h-8 bg-ctp-crust border-b border-ctp-surface0 flex items-center justify-between px-4 select-none shrink-0",children:[(0,b.jsx)("div",{className:"flex items-center gap-2",children:(0,b.jsx)("span",{className:"font-mono font-bold text-xs text-ctp-blue tracking-wider",children:"AgentRun"})}),(0,b.jsx)(g,{})]})}var i=a.i(73921),j=a.i(78301);let k=[{href:"/",label:"Monitor",icon:(0,b.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,b.jsx)("rect",{x:"2",y:"3",width:"20",height:"14",rx:"2"}),(0,b.jsx)("path",{d:"M8 21h8M12 17v4"}),(0,b.jsx)("path",{d:"M6 10h2M10 8h2M14 11h2M18 9h2"})]})},{href:"/chat",label:"Terminal",icon:(0,b.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,b.jsx)("polyline",{points:"4 17 10 11 4 5"}),(0,b.jsx)("line",{x1:"12",y1:"19",x2:"20",y2:"19"})]})},{href:"/agents",label:"Tasks",icon:(0,b.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,b.jsx)("rect",{x:"2",y:"3",width:"20",height:"18",rx:"2"}),(0,b.jsx)("path",{d:"M6 8h12M6 12h12M6 16h8"})]})},{href:"/memory",label:"Files",icon:(0,b.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:(0,b.jsx)("path",{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"})})},{href:"/security",label:"Security",icon:(0,b.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:(0,b.jsx)("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"})})},{href:"/settings",label:"Prefs",icon:(0,b.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,b.jsx)("circle",{cx:"12",cy:"12",r:"3"}),(0,b.jsx)("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 1 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 1 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 1 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"})]})}];function l(){let a=(0,j.usePathname)();return(0,b.jsx)("nav",{className:"h-14 bg-ctp-crust/95 backdrop-blur-sm border-t border-ctp-surface0 flex items-center justify-center gap-1 px-4 select-none shrink-0",children:k.map(c=>{let d="/"===c.href?"/"===a:a.startsWith(c.href);return(0,b.jsxs)(i.default,{href:c.href,className:`flex flex-col items-center gap-0.5 px-4 py-1.5 rounded-panel transition-colors ${d?"text-ctp-blue bg-ctp-blue/10":"text-ctp-overlay1 hover:text-ctp-text hover:bg-ctp-surface0/50"}`,children:[c.icon,(0,b.jsx)("span",{className:"text-2xs font-mono font-medium",children:c.label})]},c.href)})})}var m=a.i(49750);function n({onComplete:a}){let{status:c,authenticate:g,setOperatorAgentId:h}=(0,e.useWebSocket)(),{agents:i}=(0,f.useAgents)(),[j,k]=(0,d.useState)("connection"),[l,n]=(0,d.useState)(null),[o,p]=(0,d.useState)(""),[q,r]=(0,d.useState)(""),[s,t]=(0,d.useState)(!1),u=(0,d.useCallback)(async()=>{t(!0);try{let a=await fetch((0,m.getHealthUrl)(),{signal:AbortSignal.timeout(5e3)});n(a.ok),a.ok&&k("auth")}catch{n(!1)}finally{t(!1)}},[]);(0,d.useEffect)(()=>{u()},[u]),(0,d.useEffect)(()=>{"auth"===j&&"connected"===c&&k("operator")},[j,c]);let v=()=>{o.trim()?g(o.trim()):k("operator")};(0,d.useEffect)(()=>{if("done"===j){let b=setTimeout(a,600);return()=>clearTimeout(b)}},[j,a]);let w=["connection","auth","operator","done"],x=w.indexOf(j);return(0,b.jsx)("div",{className:"h-screen flex items-center justify-center bg-ctp-crust",children:(0,b.jsxs)("div",{className:"w-full max-w-lg",children:[(0,b.jsxs)("div",{className:"text-center mb-8",children:[(0,b.jsxs)("div",{className:"inline-flex items-center gap-3 mb-2",children:[(0,b.jsxs)("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",className:"text-ctp-blue",children:[(0,b.jsx)("rect",{x:"3",y:"3",width:"18",height:"18",rx:"3",stroke:"currentColor",strokeWidth:"1.5"}),(0,b.jsx)("circle",{cx:"8.5",cy:"9",r:"1.5",fill:"currentColor"}),(0,b.jsx)("circle",{cx:"15.5",cy:"9",r:"1.5",fill:"currentColor"}),(0,b.jsx)("path",{d:"M8 15c1.5 1.5 6.5 1.5 8 0",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})]}),(0,b.jsx)("span",{className:"text-xl font-mono font-bold text-ctp-text",children:"AgentRun"})]}),(0,b.jsx)("p",{className:"text-sm text-ctp-overlay0 font-mono",children:"Setup Assistant"})]}),(0,b.jsx)("div",{className:"flex items-center gap-1 mb-8 px-4",children:w.map((a,c)=>(0,b.jsx)("div",{className:"flex-1 flex items-center",children:(0,b.jsx)("div",{className:`h-1 w-full rounded-full transition-colors duration-300 ${c<=x?"bg-ctp-blue":"bg-ctp-surface0"}`})},a))}),(0,b.jsxs)("div",{className:"bg-ctp-mantle border border-ctp-surface0 rounded-window mx-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 px-4 py-3 border-b border-ctp-surface0",children:[(0,b.jsxs)("div",{className:"flex gap-1.5",children:[(0,b.jsx)("span",{className:"w-2.5 h-2.5 rounded-full bg-ctp-red/60"}),(0,b.jsx)("span",{className:"w-2.5 h-2.5 rounded-full bg-ctp-yellow/60"}),(0,b.jsx)("span",{className:"w-2.5 h-2.5 rounded-full bg-ctp-green/60"})]}),(0,b.jsx)("span",{className:"text-xs font-mono text-ctp-overlay0 ml-2",children:"setup-assistant"})]}),(0,b.jsxs)("div",{className:"p-6",children:["connection"===j&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-base font-mono font-semibold text-ctp-text mb-1",children:"Checking Connection"}),(0,b.jsx)("p",{className:"text-sm text-ctp-subtext0 mb-6",children:"Looking for the AgentRun gateway on this machine."}),(0,b.jsx)("div",{className:"os-panel px-4 py-3 mb-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[s?(0,b.jsx)("div",{className:"w-3 h-3 rounded-full bg-ctp-yellow animate-pulse"}):l?(0,b.jsx)("div",{className:"w-3 h-3 rounded-full bg-ctp-green"}):(0,b.jsx)("div",{className:"w-3 h-3 rounded-full bg-ctp-red"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm font-mono text-ctp-text",children:s?"Checking...":l?"Gateway detected":"Gateway not found"}),(0,b.jsx)("div",{className:"text-2xs text-ctp-overlay0 font-mono",children:(0,m.getHealthUrl)()})]})]})}),!1===l&&(0,b.jsxs)("div",{className:"text-xs text-ctp-subtext0 mb-4 font-mono",children:["Make sure the gateway is running:",(0,b.jsx)("br",{}),(0,b.jsx)("code",{className:"text-ctp-peach",children:"pnpm --filter gateway dev"})]}),(0,b.jsxs)("div",{className:"flex gap-2 justify-end",children:[!1===l&&(0,b.jsx)("button",{onClick:u,disabled:s,className:"px-4 py-2 text-sm font-mono bg-ctp-surface0 text-ctp-text rounded-input hover:bg-ctp-surface1 transition-colors disabled:opacity-50",children:"Retry"}),l&&(0,b.jsx)("button",{onClick:()=>k("auth"),className:"px-4 py-2 text-sm font-mono bg-ctp-blue text-ctp-crust rounded-input hover:opacity-90 transition-opacity",children:"Continue"})]})]}),"auth"===j&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-base font-mono font-semibold text-ctp-text mb-1",children:"Authentication"}),(0,b.jsx)("p",{className:"text-sm text-ctp-subtext0 mb-6",children:"Enter your gateway auth token, or skip if auth is disabled."}),(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsx)("label",{className:"block text-xs font-mono text-ctp-subtext0 mb-1.5",children:"Auth Token"}),(0,b.jsx)("input",{type:"password",value:o,onChange:a=>p(a.target.value),placeholder:"paste token here...",className:"w-full bg-ctp-surface0 border border-ctp-surface1 rounded-input px-3 py-2 text-sm font-mono text-ctp-text placeholder:text-ctp-overlay0 focus:outline-none focus:border-ctp-blue transition-colors",onKeyDown:a=>"Enter"===a.key&&v()})]}),"auth_failed"===c&&(0,b.jsx)("div",{className:"text-xs font-mono text-ctp-red mb-4",children:"Authentication failed. Check your token."}),(0,b.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,b.jsx)("button",{onClick:()=>k("operator"),className:"px-4 py-2 text-sm font-mono text-ctp-subtext0 hover:text-ctp-text transition-colors",children:"Skip"}),(0,b.jsx)("button",{onClick:v,className:"px-4 py-2 text-sm font-mono bg-ctp-blue text-ctp-crust rounded-input hover:opacity-90 transition-opacity",children:o.trim()?"Authenticate":"Continue"})]})]}),"operator"===j&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-base font-mono font-semibold text-ctp-text mb-1",children:"Operator Agent"}),(0,b.jsx)("p",{className:"text-sm text-ctp-subtext0 mb-6",children:"Select a running agent to act as the system operator, or skip to choose later."}),i.length>0?(0,b.jsx)("div",{className:"space-y-1.5 mb-4 max-h-48 overflow-y-auto",children:i.map(a=>(0,b.jsxs)("button",{onClick:()=>r(a.id),className:`w-full text-left os-panel px-3 py-2.5 transition-colors ${q===a.id?"border-ctp-blue bg-ctp-blue/10":"hover:border-ctp-surface1"}`,children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-sm font-mono text-ctp-text",children:a.id}),(0,b.jsx)("span",{className:`text-2xs font-mono ${"running"===a.state?"text-ctp-green":"text-ctp-overlay0"}`,children:a.state})]}),a.model&&(0,b.jsx)("div",{className:"text-2xs text-ctp-overlay0 font-mono mt-0.5",children:a.model})]},a.id))}):(0,b.jsxs)("div",{className:"os-panel px-4 py-6 text-center mb-4",children:[(0,b.jsx)("div",{className:"text-sm text-ctp-overlay0 font-mono mb-2",children:"No agents running"}),(0,b.jsx)("div",{className:"text-xs text-ctp-overlay0 font-mono",children:"Start agents from the Task Manager after setup."})]}),(0,b.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,b.jsx)("button",{onClick:()=>{k("done")},className:"px-4 py-2 text-sm font-mono text-ctp-subtext0 hover:text-ctp-text transition-colors",children:"Skip"}),(0,b.jsx)("button",{onClick:()=>{q&&h(q),k("done")},disabled:!q&&i.length>0,className:"px-4 py-2 text-sm font-mono bg-ctp-blue text-ctp-crust rounded-input hover:opacity-90 transition-opacity disabled:opacity-50",children:q?"Set Operator":"Continue"})]})]}),"done"===j&&(0,b.jsxs)("div",{className:"text-center py-4",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-full bg-ctp-green/20 flex items-center justify-center mx-auto mb-3",children:(0,b.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",className:"text-ctp-green",children:(0,b.jsx)("path",{d:"M5 13l4 4L19 7",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),(0,b.jsx)("h2",{className:"text-base font-mono font-semibold text-ctp-text mb-1",children:"Ready"}),(0,b.jsx)("p",{className:"text-sm text-ctp-subtext0",children:"Loading desktop..."})]})]})]}),(0,b.jsx)("div",{className:"flex justify-between px-4 mt-3",children:["Connection","Auth","Operator","Done"].map((a,c)=>(0,b.jsx)("span",{className:`text-2xs font-mono ${c<=x?"text-ctp-blue":"text-ctp-overlay0"}`,children:a},a))})]})})}function o({children:a}){let{operatorAgentId:c}=(0,e.useWebSocket)(),[f,g]=(0,d.useState)(!1),[i,j]=(0,d.useState)(!1);return((0,d.useEffect)(()=>{j(!0),"true"===localStorage.getItem("setupDismissed")&&g(!0)},[]),i)?c||f?(0,b.jsxs)("div",{className:"h-screen flex flex-col overflow-hidden",children:[(0,b.jsx)(h,{}),(0,b.jsx)("main",{className:"flex-1 overflow-auto p-4 lg:p-6",children:a}),(0,b.jsx)(l,{})]}):(0,b.jsx)(n,{onComplete:()=>{g(!0),localStorage.setItem("setupDismissed","true")}}):(0,b.jsx)("div",{className:"h-screen bg-ctp-base flex items-center justify-center",children:(0,b.jsx)("div",{className:"text-sm font-mono text-ctp-overlay0",children:"Loading..."})})}var p=d;class q extends p.Component{constructor(a){super(a),this.state={hasError:!1,error:null}}static getDerivedStateFromError(a){return{hasError:!0,error:a}}componentDidCatch(a,b){console.error("[AgentRun] Uncaught render error:",a,b.componentStack)}render(){return this.state.hasError?(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-ctp-base p-8",children:(0,b.jsxs)("div",{className:"max-w-lg w-full bg-ctp-mantle border border-ctp-red/30 rounded-window p-8",children:[(0,b.jsx)("h2",{className:"text-lg font-mono font-bold text-ctp-red mb-2",children:"Kernel Panic"}),(0,b.jsx)("p",{className:"text-sm text-ctp-subtext0 mb-4",children:"The dashboard encountered a fatal error. Try restarting."}),(0,b.jsx)("pre",{className:"text-xs text-ctp-red/70 bg-ctp-crust rounded-panel p-3 overflow-auto max-h-40 mb-4 font-mono",children:this.state.error?.message}),(0,b.jsx)("button",{onClick:()=>{this.setState({hasError:!1,error:null}),window.location.reload()},className:"px-4 py-2 text-sm font-mono font-medium bg-ctp-blue/20 text-ctp-blue rounded-input hover:bg-ctp-blue/30 transition-colors",children:"Reboot"})]})}):this.props.children}}function r({children:a}){return(0,b.jsxs)("html",{lang:"en",children:[(0,b.jsxs)("head",{children:[(0,b.jsx)("title",{children:"AgentRun"}),(0,b.jsx)("meta",{name:"description",content:"AgentRun â€” Run any AI agent safely"}),(0,b.jsx)("link",{rel:"icon",href:"/favicon.svg",type:"image/svg+xml"})]}),(0,b.jsx)("body",{children:(0,b.jsx)(q,{children:(0,b.jsx)(c.WebSocketProvider,{children:(0,b.jsx)(o,{children:a})})})})]})}a.s(["default",()=>r],80905)}];

//# sourceMappingURL=apps_dashboard_src_app_layout_tsx_377b4e1d._.js.map