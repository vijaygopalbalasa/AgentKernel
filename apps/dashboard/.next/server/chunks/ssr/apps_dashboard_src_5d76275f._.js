module.exports=[16098,a=>{"use strict";var b=a.i(69580),c=a.i(89930),d=a.i(78301);function e({title:a,icon:e,children:f,className:g,noPadding:h}){let i=(0,d.useRouter)(),[j,k]=(0,c.useState)(!1);return(0,b.jsxs)("div",{className:`flex flex-col bg-ctp-mantle border border-ctp-surface0 rounded-window shadow-lg shadow-black/20 overflow-hidden ${g??""}`,children:[(0,b.jsxs)("div",{className:"window-titlebar shrink-0",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1.5 mr-2",children:[(0,b.jsx)("button",{onClick:()=>i.push("/"),className:"w-3 h-3 rounded-full bg-ctp-red hover:brightness-110 transition-all",title:"Close — go to desktop"}),(0,b.jsx)("button",{onClick:()=>k(!j),className:"w-3 h-3 rounded-full bg-ctp-yellow hover:brightness-110 transition-all",title:j?"Restore":"Minimize"}),(0,b.jsx)("button",{onClick:()=>k(!1),className:"w-3 h-3 rounded-full bg-ctp-green hover:brightness-110 transition-all",title:"Maximize"})]}),e&&(0,b.jsx)("span",{className:"text-ctp-subtext0",children:e}),(0,b.jsx)("span",{className:"text-xs font-mono font-medium text-ctp-subtext1 truncate",children:a})]}),!j&&(0,b.jsx)("div",{className:`flex-1 overflow-auto ${h?"":"p-4"}`,children:f}),j&&(0,b.jsx)("div",{className:"px-4 py-6 text-center",children:(0,b.jsx)("button",{onClick:()=>k(!1),className:"text-xs font-mono text-ctp-overlay0 hover:text-ctp-text transition-colors",children:"Click to restore window"})})]})}a.s(["Window",()=>e])},1732,a=>{"use strict";var b=a.i(69580);function c({message:a,hint:c,className:d=""}){return(0,b.jsxs)("div",{className:`py-8 text-center font-mono ${d}`,children:[(0,b.jsx)("div",{className:"text-sm text-ctp-overlay0",children:a}),c&&(0,b.jsx)("div",{className:"text-xs text-ctp-overlay0/70 mt-1",children:c})]})}a.s(["EmptyState",()=>c])},78534,a=>{"use strict";var b=a.i(69580);let c={primary:"bg-ctp-blue text-ctp-crust font-medium hover:bg-ctp-lavender active:bg-ctp-sapphire",ghost:"bg-ctp-surface0 text-ctp-subtext1 hover:bg-ctp-surface1 hover:text-ctp-text active:bg-ctp-surface2",danger:"bg-ctp-red/15 text-ctp-red hover:bg-ctp-red/25 active:bg-ctp-red/35"};function d({variant:a="primary",children:d,className:e="",disabled:f,...g}){return(0,b.jsx)("button",{className:`px-4 py-2 rounded-input text-sm transition-colors duration-150 cursor-pointer disabled:opacity-40 disabled:cursor-not-allowed ${c[a]} ${e}`,disabled:f,...g,children:d})}a.s(["Button",()=>d])},43203,10173,a=>{"use strict";var b=a.i(69580);function c({children:a,className:c=""}){return(0,b.jsx)("div",{className:`os-panel p-4 ${c}`,children:a})}a.s(["Panel",()=>c],43203);let d={default:"bg-ctp-surface1 text-ctp-subtext1",success:"bg-ctp-green/15 text-ctp-green",warning:"bg-ctp-yellow/15 text-ctp-yellow",danger:"bg-ctp-red/15 text-ctp-red",info:"bg-ctp-blue/15 text-ctp-blue"};function e({children:a,variant:c="default",className:e=""}){return(0,b.jsx)("span",{className:`inline-flex items-center px-2.5 py-0.5 text-xs font-mono font-medium rounded-pill ${d[c]} ${e}`,children:a})}a.s(["Tag",()=>e],10173)},92146,a=>{"use strict";var b=a.i(69580);function c({label:a,className:c="",id:d,...e}){let f=d||a?.toLowerCase().replace(/\s+/g,"-");return(0,b.jsxs)("div",{className:"flex flex-col gap-1.5",children:[a&&(0,b.jsx)("label",{htmlFor:f,className:"text-xs text-ctp-subtext0 font-medium",children:a}),(0,b.jsx)("input",{id:f,className:`bg-ctp-surface0 border border-ctp-surface1 rounded-input px-3 py-2 text-sm text-ctp-text placeholder:text-ctp-overlay0 focus:outline-none focus:border-ctp-blue/50 focus:ring-1 focus:ring-ctp-blue/20 transition-colors ${c}`,...e})]})}a.s(["Input",()=>c])},73537,a=>{"use strict";var b=a.i(69580),c=a.i(89930),d=a.i(16098),e=a.i(43203),f=a.i(92146),g=a.i(78534);let h=["semantic","episodic","procedural"],i={semantic:"border-ctp-blue bg-ctp-blue/15 text-ctp-blue",episodic:"border-ctp-mauve bg-ctp-mauve/15 text-ctp-mauve",procedural:"border-ctp-green bg-ctp-green/15 text-ctp-green"};function j({onSearch:a,loading:d,activeType:e}){let[j,k]=(0,c.useState)(""),[l,m]=(0,c.useState)(new Set),n=(0,c.useCallback)(a=>{m(b=>{let c=new Set(b);return c.has(a)?c.delete(a):c.add(a),c})},[]),o=(0,c.useCallback)(b=>{if(b.preventDefault(),!j.trim())return;let c=l.size>0?[...l]:void 0;a(j.trim(),c)},[j,l,a]);return(0,b.jsxs)("form",{onSubmit:o,className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)("div",{className:"flex-1",children:(0,b.jsx)(f.Input,{value:j,onChange:a=>k(a.target.value),placeholder:"Search memory..."})}),(0,b.jsx)(g.Button,{type:"submit",disabled:d||!j.trim(),children:d?"Searching...":"Search"})]}),(0,b.jsxs)("div",{className:"flex gap-2 items-center",children:[h.map(a=>(0,b.jsx)("button",{type:"button",onClick:()=>n(a),className:`px-3 py-1 text-xs font-mono rounded-pill border transition-colors ${l.has(a)||e===a?i[a]:"border-ctp-surface1 text-ctp-overlay0 hover:text-ctp-subtext1"}`,children:a},a)),e&&(0,b.jsx)("span",{className:"text-2xs text-ctp-overlay0 font-mono ml-1",children:"(filtered via sidebar)"})]})]})}var k=a.i(10173);let l={semantic:"border-ctp-blue",episodic:"border-ctp-mauve",procedural:"border-ctp-green"};function m({memory:a}){return(0,b.jsxs)("div",{className:`border-l-2 ${l[a.type]||"border-ctp-surface1"} pl-3 py-2`,children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,b.jsx)(k.Tag,{variant:"semantic"===a.type?"info":"episodic"===a.type?"default":"success",children:a.type}),(0,b.jsxs)("span",{className:"text-2xs text-ctp-overlay0 font-mono tabular-nums",children:["score: ","number"==typeof a.score?a.score.toFixed(2):"—"]}),void 0!==a.importance&&(0,b.jsxs)("span",{className:"text-2xs text-ctp-overlay0 font-mono tabular-nums",children:["imp: ",a.importance]})]}),(0,b.jsx)("div",{className:"text-sm text-ctp-subtext1 mb-1",children:a.content}),a.tags&&a.tags.length>0&&(0,b.jsx)("div",{className:"flex flex-wrap gap-1",children:a.tags.map(a=>(0,b.jsx)("span",{className:"text-2xs px-1.5 py-0.5 rounded bg-ctp-surface0 text-ctp-overlay1 font-mono",children:a},a))})]})}var n=a.i(1732);function o({results:a,loading:c}){return c?(0,b.jsx)("div",{className:"py-8 text-center",children:(0,b.jsx)("div",{className:"inline-block w-4 h-4 rounded-full border-2 border-ctp-blue/30 border-t-ctp-blue animate-spin"})}):a.length?(0,b.jsx)("div",{className:"space-y-1",children:a.map((a,c)=>(0,b.jsx)(m,{memory:a},`${a.type}-${c}`))}):(0,b.jsx)(n.EmptyState,{message:"No memories found. Try a different query."})}function p({onStore:a}){let[d,e]=(0,c.useState)(!1),[h,i]=(0,c.useState)(""),[j,k]=(0,c.useState)(""),[l,m]=(0,c.useState)(""),[n,o]=(0,c.useState)("0.5"),[p,q]=(0,c.useState)(!1),[r,s]=(0,c.useState)(null),t=(0,c.useCallback)(async b=>{if(b.preventDefault(),h.trim()&&j.trim()){q(!0),s(null);try{await a({category:h.trim(),fact:j.trim(),tags:l.split(",").map(a=>a.trim()).filter(Boolean),importance:Number(n)||.5}),s("Fact stored successfully"),k("")}catch(a){s(`Error: ${a instanceof Error?a.message:"Store failed"}`)}finally{q(!1)}}},[h,j,l,n,a]);return(0,b.jsxs)("div",{className:"os-panel",children:[(0,b.jsxs)("button",{onClick:()=>e(!d),className:"w-full px-3 py-2 flex items-center justify-between text-xs text-ctp-overlay1 hover:text-ctp-text transition-colors font-mono",children:[(0,b.jsx)("span",{children:"+ Store new fact"}),(0,b.jsx)("span",{className:"text-ctp-overlay0",children:d?"−":"+"})]}),d&&(0,b.jsxs)("form",{onSubmit:t,className:"px-3 pb-3 space-y-3",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,b.jsx)(f.Input,{label:"Category",value:h,onChange:a=>i(a.target.value),placeholder:"e.g. user-preferences"}),(0,b.jsx)(f.Input,{label:"Tags (comma-separated)",value:l,onChange:a=>m(a.target.value),placeholder:"e.g. prefs, ui"})]}),(0,b.jsx)(f.Input,{label:"Fact",value:j,onChange:a=>k(a.target.value),placeholder:"e.g. User prefers dark mode"}),(0,b.jsxs)("div",{className:"flex items-end gap-3",children:[(0,b.jsx)("div",{className:"w-32",children:(0,b.jsx)(f.Input,{label:"Importance (0-1)",type:"number",value:n,onChange:a=>o(a.target.value),min:"0",max:"1",step:"0.1"})}),(0,b.jsx)(g.Button,{type:"submit",disabled:p||!j.trim(),children:p?"Storing...":"Store"})]}),r&&(0,b.jsx)("div",{className:`text-xs font-mono ${r.startsWith("Error")?"text-ctp-red":"text-ctp-green"}`,children:r})]})]})}var q=a.i(36146);let r=[{id:"semantic",label:"Semantic",active:"text-ctp-blue bg-ctp-blue/10 font-medium",inactive:"text-ctp-overlay1 hover:text-ctp-blue hover:bg-ctp-blue/5",iconActive:"text-ctp-blue",icon:(0,b.jsxs)("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,b.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,b.jsx)("path",{d:"M12 16v-4M12 8h.01"})]})},{id:"episodic",label:"Episodic",active:"text-ctp-mauve bg-ctp-mauve/10 font-medium",inactive:"text-ctp-overlay1 hover:text-ctp-mauve hover:bg-ctp-mauve/5",iconActive:"text-ctp-mauve",icon:(0,b.jsxs)("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,b.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,b.jsx)("polyline",{points:"12 6 12 12 16 14"})]})},{id:"procedural",label:"Procedural",active:"text-ctp-green bg-ctp-green/10 font-medium",inactive:"text-ctp-overlay1 hover:text-ctp-green hover:bg-ctp-green/5",iconActive:"text-ctp-green",icon:(0,b.jsxs)("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,b.jsx)("polyline",{points:"4 17 10 11 4 5"}),(0,b.jsx)("line",{x1:"12",y1:"19",x2:"20",y2:"19"})]})}];function s(){let{results:a,loading:f,error:g,search:h,storeFact:i}=function(){let{sendAgentTask:a,operatorAgentId:b}=(0,q.useWebSocket)(),[d,e]=(0,c.useState)([]),[f,g]=(0,c.useState)(!1),[h,i]=(0,c.useState)(null);return{results:d,loading:f,error:h,search:(0,c.useCallback)(async(c,d,f)=>{if(!b)return void i("Set an operator agent in Settings first");g(!0),i(null);try{let g=await a(b,{type:"search_memory",query:c,...d?.length&&{types:d},...f&&{limit:f}});e(g?.memories??[])}catch(a){i(a instanceof Error?a.message:"Search failed"),e([])}finally{g(!1)}},[a,b]),storeFact:(0,c.useCallback)(async c=>{if(!b)throw Error("Set an operator agent in Settings first");await a(b,{type:"store_fact",...c})},[a,b])}}(),[k,l]=(0,c.useState)(null),m=(0,c.useCallback)(a=>{l(b=>b===a?null:a)},[]),n=(0,c.useCallback)((a,b)=>{h(a,k?[k]:b)},[k,h]);return(0,b.jsx)(d.Window,{title:"File Manager — Memory",icon:(0,b.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:(0,b.jsx)("path",{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"})}),className:"h-full",children:(0,b.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4 h-full",children:[(0,b.jsxs)("div",{className:"lg:w-48 shrink-0",children:[(0,b.jsxs)(e.Panel,{className:"space-y-1",children:[(0,b.jsx)("h2",{className:"text-xs font-mono font-semibold text-ctp-subtext0 uppercase tracking-wider mb-2",children:"Memory Types"}),r.map(a=>{let c=k===a.id;return(0,b.jsxs)("button",{onClick:()=>m(a.id),className:`w-full flex items-center gap-2 px-2 py-1.5 rounded-input text-xs font-mono transition-colors text-left ${c?a.active:a.inactive}`,children:[(0,b.jsx)("span",{className:c?a.iconActive:"text-ctp-overlay0",children:a.icon}),a.label,c&&(0,b.jsx)("span",{className:"ml-auto text-2xs text-ctp-overlay0",children:"✕"})]},a.id)})]}),(0,b.jsx)("div",{className:"mt-3",children:(0,b.jsx)(p,{onStore:i})})]}),(0,b.jsx)("div",{className:"flex-1 min-w-0",children:(0,b.jsxs)(e.Panel,{children:[(0,b.jsx)(j,{onSearch:n,loading:f,activeType:k}),g&&(0,b.jsx)("div",{className:"mt-2 text-xs text-ctp-red font-mono",children:g}),(0,b.jsx)("div",{className:"mt-4",children:(0,b.jsx)(o,{results:a,loading:f})})]})})]})})}a.s(["default",()=>s],73537)}];

//# sourceMappingURL=apps_dashboard_src_5d76275f._.js.map