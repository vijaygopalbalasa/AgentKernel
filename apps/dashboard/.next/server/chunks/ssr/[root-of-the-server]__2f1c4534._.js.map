{"version":3,"sources":["../../../../../../node_modules/.pnpm/next%4016.1.6_react-dom%4019.2.4_react%4019.2.4__react%4019.2.4/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts","../../../../../../node_modules/.pnpm/next%4016.1.6_react-dom%4019.2.4_react%4019.2.4__react%4019.2.4/node_modules/next/src/server/route-modules/app-page/vendored/contexts/app-router-context.ts","../../../../../../node_modules/.pnpm/next%4016.1.6_react-dom%4019.2.4_react%4019.2.4__react%4019.2.4/node_modules/next/src/server/route-modules/app-page/vendored/contexts/hooks-client-context.ts","../../../../../../node_modules/.pnpm/next%4016.1.6_react-dom%4019.2.4_react%4019.2.4__react%4019.2.4/node_modules/next/src/server/route-modules/app-page/vendored/contexts/server-inserted-html.ts","../../../../../../node_modules/.pnpm/next%4016.1.6_react-dom%4019.2.4_react%4019.2.4__react%4019.2.4/node_modules/next/src/server/route-modules/app-page/module.compiled.js","../../../../../../node_modules/.pnpm/next%4016.1.6_react-dom%4019.2.4_react%4019.2.4__react%4019.2.4/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-runtime.ts","../../../../../../node_modules/.pnpm/next%4016.1.6_react-dom%4019.2.4_react%4019.2.4__react%4019.2.4/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-server-dom-turbopack-client.ts","../../../../../../apps/dashboard/src/hooks/useAgents.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].AppRouterContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].HooksClientContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].ServerInsertedHtml\n","if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxRuntime\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactServerDOMTurbopackClient\n","\"use client\";\n\nimport { useState, useEffect, useCallback } from \"react\";\nimport type { AgentInfo } from \"@/lib/types\";\nimport { useWebSocket } from \"./useWebSocket\";\nimport {\n  agentStatusMessage,\n  agentSpawnMessage,\n  agentTerminateMessage,\n} from \"@/lib/ws-client\";\n\nconst POLL_INTERVAL = 10_000;\n\nexport function useAgents() {\n  const { status, sendRequest } = useWebSocket();\n  const [agents, setAgents] = useState<AgentInfo[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  const refresh = useCallback(async () => {\n    if (status !== \"connected\") return;\n    try {\n      setLoading(true);\n      const response = await sendRequest(agentStatusMessage());\n      if (response.type === \"agent_list\" && response.payload) {\n        setAgents(\n          (response.payload.agents as AgentInfo[]) || []\n        );\n        setError(null);\n      }\n    } catch (err) {\n      setError(err instanceof Error ? err.message : \"Failed to fetch agents\");\n    } finally {\n      setLoading(false);\n    }\n  }, [status, sendRequest]);\n\n  useEffect(() => {\n    if (status === \"connected\") {\n      refresh();\n      const interval = setInterval(refresh, POLL_INTERVAL);\n      return () => clearInterval(interval);\n    }\n  }, [status, refresh]);\n\n  const spawn = useCallback(\n    async (manifest: Record<string, unknown>) => {\n      const response = await sendRequest(agentSpawnMessage(manifest));\n      if (response.type === \"error\") {\n        throw new Error(\n          (response.payload?.message as string) || \"Failed to spawn agent\"\n        );\n      }\n      await refresh();\n      return response;\n    },\n    [sendRequest, refresh]\n  );\n\n  const terminate = useCallback(\n    async (agentId: string, force = false) => {\n      const response = await sendRequest(\n        agentTerminateMessage(agentId, force)\n      );\n      if (response.type === \"error\") {\n        throw new Error(\n          (response.payload?.message as string) ||\n            \"Failed to terminate agent\"\n        );\n      }\n      await refresh();\n      return response;\n    },\n    [sendRequest, refresh]\n  );\n\n  return { agents, loading, error, refresh, spawn, terminate };\n}\n"],"names":["module","exports","require","vendored","React","AppRouterContext","HooksClientContext","ServerInsertedHtml","process","env","NEXT_RUNTIME","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK","ReactJsxRuntime","ReactServerDOMTurbopackClient"],"mappings":"6CAAAA,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRC,QAAQ,CAAC,YAAY,CAAEC,KAAK,+BCF9BJ,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRC,QAAQ,CAAC,QAAW,CAACE,gBAAgB,+BCFvCL,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRC,QAAQ,CAAC,QAAW,CAACG,kBAAkB,+BCFzCN,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRC,QAAQ,CAAC,QAAW,CAACI,kBAAkB,8sBCwBjCP,GAAOC,OAAO,CAAGC,EAAQ,CAAA,CAAA,IAAA,iCC1BjCF,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRC,QAAQ,CAAC,YAAY,CAAEW,eAAe,+BCFxCd,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRC,QAAQ,CAAC,YAAY,CAAEY,6BAA6B,yBCAtD,IAAA,EAAA,EAAA,CAAA,CAAA,OAEA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAQO,SAAS,IACd,GAAM,QAAE,CAAM,aAAE,CAAW,CAAE,CAAG,CAAA,EAAA,EAAA,YAAA,AAAY,IACtC,CAAC,EAAQ,EAAU,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAc,EAAE,EAC9C,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACjC,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,EAAwB,MAE5C,EAAU,CAAA,EAAA,EAAA,WAAA,AAAW,EAAC,UAC1B,GAAe,aAAa,CAAxB,EACJ,GAAI,CACF,GAAW,GACX,IAAM,EAAW,MAAM,EAAY,CAAA,EAAA,EAAA,kBAAA,AAAkB,KAC/B,eAAlB,EAAS,IAAI,EAAqB,EAAS,OAAO,EAAE,CACtD,EACG,EAAS,OAAO,CAAC,MAAM,EAAoB,EAAE,EAEhD,EAAS,MAEb,CAAE,MAAO,EAAK,CACZ,EAAS,aAAe,MAAQ,EAAI,OAAO,CAAG,yBAChD,QAAU,CACR,EAAW,GACb,CACF,EAAG,CAAC,EAAQ,EAAY,EAExB,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACR,GAAe,cAAX,EAAwB,CAC1B,IACA,IAAM,EAAW,YAAY,EA7Bb,KA8BhB,EADsC,IAC/B,IAAM,cAAc,EAC7B,CACF,EAAG,CAAC,EAAQ,EAAQ,EAEpB,IAAM,EAAQ,CAAA,EAAA,EAAA,WAAA,AAAW,EACvB,MAAO,IACL,IAAM,EAAW,MAAM,EAAY,CAAA,EAAA,EAAA,iBAAA,AAAiB,EAAC,IACrD,GAAsB,SAAS,CAA3B,EAAS,IAAI,CACf,MAAU,AAAJ,MACH,EAAS,OAAO,EAAE,SAAsB,yBAI7C,OADA,MAAM,IACC,CACT,EACA,CAAC,EAAa,EAAQ,EAGlB,EAAY,CAAA,EAAA,EAAA,WAAA,AAAW,EAC3B,MAAO,EAAiB,GAAQ,CAAK,IACnC,IAAM,EAAW,MAAM,EACrB,CAAA,EAAA,EAAA,qBAAA,AAAqB,EAAC,EAAS,IAEjC,GAAsB,SAAS,CAA3B,EAAS,IAAI,CACf,MAAM,AAAI,MACP,EAAS,OAAO,EAAE,SACjB,6BAIN,OADA,MAAM,IACC,CACT,EACA,CAAC,EAAa,EAAQ,EAGxB,MAAO,QAAE,UAAQ,QAAS,UAAO,QAAS,YAAO,CAAU,CAC7D","ignoreList":[0,1,2,3,4,5,6]}