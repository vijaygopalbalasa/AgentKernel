{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///Users/vijaygopalb/AgentOS/apps/dashboard/src/lib/ws-client.ts"],"sourcesContent":["import type { WsMessage, ChatMessage } from \"./types\";\n\nlet counter = 0;\n\nexport function generateId(prefix: string = \"req\"): string {\n  counter += 1;\n  return `${prefix}-${Date.now()}-${counter}`;\n}\n\nexport function authMessage(token: string): WsMessage {\n  return {\n    type: \"auth\",\n    id: generateId(\"auth\"),\n    payload: { token },\n  };\n}\n\nexport function agentStatusMessage(): WsMessage {\n  return {\n    type: \"agent_status\",\n    id: generateId(\"agents\"),\n  };\n}\n\nexport function subscribeMessage(channels: string[]): WsMessage {\n  return {\n    type: \"subscribe\",\n    id: generateId(\"sub\"),\n    payload: { channels },\n  };\n}\n\nexport function chatMessage(\n  messages: ChatMessage[],\n  options?: { model?: string; maxTokens?: number; temperature?: number; stream?: boolean; systemPrompt?: string }\n): WsMessage {\n  return {\n    type: \"chat\",\n    id: generateId(\"chat\"),\n    payload: {\n      messages,\n      ...(options?.model && { model: options.model }),\n      ...(options?.maxTokens && { maxTokens: options.maxTokens }),\n      ...(options?.temperature !== undefined && { temperature: options.temperature }),\n      ...(options?.stream && { stream: true }),\n      ...(options?.systemPrompt && { systemPrompt: options.systemPrompt }),\n    },\n  };\n}\n\nexport function agentTaskMessage(\n  agentId: string,\n  task: Record<string, unknown>\n): WsMessage {\n  return {\n    type: \"agent_task\",\n    id: generateId(\"task\"),\n    payload: { agentId, task },\n  };\n}\n\nexport function agentSpawnMessage(manifest: Record<string, unknown>): WsMessage {\n  return {\n    type: \"agent_spawn\",\n    id: generateId(\"spawn\"),\n    payload: { manifest },\n  };\n}\n\nexport function agentTerminateMessage(\n  agentId: string,\n  force = false\n): WsMessage {\n  return {\n    type: \"agent_terminate\",\n    id: generateId(\"term\"),\n    payload: { agentId, force },\n  };\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAEA,IAAI,UAAU;AAEP,SAAS,WAAW,SAAiB,KAAK;IAC/C,WAAW;IACX,OAAO,GAAG,OAAO,CAAC,EAAE,KAAK,GAAG,GAAG,CAAC,EAAE,SAAS;AAC7C;AAEO,SAAS,YAAY,KAAa;IACvC,OAAO;QACL,MAAM;QACN,IAAI,WAAW;QACf,SAAS;YAAE;QAAM;IACnB;AACF;AAEO,SAAS;IACd,OAAO;QACL,MAAM;QACN,IAAI,WAAW;IACjB;AACF;AAEO,SAAS,iBAAiB,QAAkB;IACjD,OAAO;QACL,MAAM;QACN,IAAI,WAAW;QACf,SAAS;YAAE;QAAS;IACtB;AACF;AAEO,SAAS,YACd,QAAuB,EACvB,OAA+G;IAE/G,OAAO;QACL,MAAM;QACN,IAAI,WAAW;QACf,SAAS;YACP;YACA,GAAI,SAAS,SAAS;gBAAE,OAAO,QAAQ,KAAK;YAAC,CAAC;YAC9C,GAAI,SAAS,aAAa;gBAAE,WAAW,QAAQ,SAAS;YAAC,CAAC;YAC1D,GAAI,SAAS,gBAAgB,aAAa;gBAAE,aAAa,QAAQ,WAAW;YAAC,CAAC;YAC9E,GAAI,SAAS,UAAU;gBAAE,QAAQ;YAAK,CAAC;YACvC,GAAI,SAAS,gBAAgB;gBAAE,cAAc,QAAQ,YAAY;YAAC,CAAC;QACrE;IACF;AACF;AAEO,SAAS,iBACd,OAAe,EACf,IAA6B;IAE7B,OAAO;QACL,MAAM;QACN,IAAI,WAAW;QACf,SAAS;YAAE;YAAS;QAAK;IAC3B;AACF;AAEO,SAAS,kBAAkB,QAAiC;IACjE,OAAO;QACL,MAAM;QACN,IAAI,WAAW;QACf,SAAS;YAAE;QAAS;IACtB;AACF;AAEO,SAAS,sBACd,OAAe,EACf,QAAQ,KAAK;IAEb,OAAO;QACL,MAAM;QACN,IAAI,WAAW;QACf,SAAS;YAAE;YAAS;QAAM;IAC5B;AACF"}},
    {"offset": {"line": 114, "column": 0}, "map": {"version":3,"sources":["file:///Users/vijaygopalb/AgentOS/apps/dashboard/src/lib/constants.ts"],"sourcesContent":["export const DEFAULT_GATEWAY_HOST =\n  typeof window !== \"undefined\" ? window.location.hostname : \"127.0.0.1\";\n\nexport const DEFAULT_GATEWAY_PORT = 18800;\nexport const DEFAULT_HTTP_PORT = 18801;\n\nexport function getWsUrl(host?: string, port?: number): string {\n  const h = host || DEFAULT_GATEWAY_HOST;\n  const p = port || DEFAULT_GATEWAY_PORT;\n  return `ws://${h}:${p}`;\n}\n\nexport function getHealthUrl(host?: string, port?: number): string {\n  const h = host || DEFAULT_GATEWAY_HOST;\n  const p = port || DEFAULT_HTTP_PORT;\n  return `http://${h}:${p}/health`;\n}\n\nexport function getMetricsUrl(host?: string, port?: number): string {\n  const h = host || DEFAULT_GATEWAY_HOST;\n  const p = port || DEFAULT_HTTP_PORT;\n  return `http://${h}:${p}/metrics`;\n}\n\nexport const MAX_EVENTS = 100;\nexport const REQUEST_TIMEOUT_MS = 10_000;\nexport const RECONNECT_BASE_MS = 1_000;\nexport const RECONNECT_MAX_MS = 30_000;\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAAO,MAAM,uBACX,sCAAgC,0BAA2B;AAEtD,MAAM,uBAAuB;AAC7B,MAAM,oBAAoB;AAE1B,SAAS,SAAS,IAAa,EAAE,IAAa;IACnD,MAAM,IAAI,QAAQ;IAClB,MAAM,IAAI,QAAQ;IAClB,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC,EAAE,GAAG;AACzB;AAEO,SAAS,aAAa,IAAa,EAAE,IAAa;IACvD,MAAM,IAAI,QAAQ;IAClB,MAAM,IAAI,QAAQ;IAClB,OAAO,CAAC,OAAO,EAAE,EAAE,CAAC,EAAE,EAAE,OAAO,CAAC;AAClC;AAEO,SAAS,cAAc,IAAa,EAAE,IAAa;IACxD,MAAM,IAAI,QAAQ;IAClB,MAAM,IAAI,QAAQ;IAClB,OAAO,CAAC,OAAO,EAAE,EAAE,CAAC,EAAE,EAAE,QAAQ,CAAC;AACnC;AAEO,MAAM,aAAa;AACnB,MAAM,qBAAqB;AAC3B,MAAM,oBAAoB;AAC1B,MAAM,mBAAmB"}},
    {"offset": {"line": 162, "column": 0}, "map": {"version":3,"sources":["file:///Users/vijaygopalb/AgentOS/apps/dashboard/src/providers/WebSocketProvider.tsx"],"sourcesContent":["\"use client\";\n\nimport {\n  createContext,\n  useCallback,\n  useEffect,\n  useRef,\n  useState,\n  type ReactNode,\n} from \"react\";\nimport type {\n  WsMessage,\n  ChatMessage,\n  TokenUsage,\n  GatewayEvent,\n  ConnectionStatus,\n} from \"@/lib/types\";\nimport {\n  authMessage,\n  agentStatusMessage,\n  subscribeMessage,\n  chatMessage,\n  agentTaskMessage,\n  generateId,\n} from \"@/lib/ws-client\";\nimport {\n  getWsUrl,\n  MAX_EVENTS,\n  REQUEST_TIMEOUT_MS,\n  RECONNECT_BASE_MS,\n  RECONNECT_MAX_MS,\n} from \"@/lib/constants\";\n\ninterface PendingRequest {\n  resolve: (msg: WsMessage) => void;\n  reject: (err: Error) => void;\n  timeoutId: ReturnType<typeof setTimeout>;\n}\n\ninterface StreamHandler {\n  onDelta: (delta: string) => void;\n  accumulated: string;\n  resolve: (result: {\n    content: string;\n    model?: string;\n    usage?: TokenUsage;\n  }) => void;\n  reject: (err: Error) => void;\n}\n\nexport interface WebSocketContextValue {\n  status: ConnectionStatus;\n  authenticate: (token: string) => void;\n  sendRequest: (message: WsMessage) => Promise<WsMessage>;\n  sendAgentTask: (\n    agentId: string,\n    task: Record<string, unknown>\n  ) => Promise<unknown>;\n  sendStreamingChat: (\n    messages: ChatMessage[],\n    onDelta: (delta: string) => void,\n    options?: { model?: string; maxTokens?: number; temperature?: number }\n  ) => Promise<{ content: string; model?: string; usage?: TokenUsage }>;\n  events: GatewayEvent[];\n  operatorAgentId: string | null;\n  setOperatorAgentId: (id: string | null) => void;\n}\n\nexport const WebSocketContext = createContext<WebSocketContextValue | null>(\n  null\n);\n\nexport function WebSocketProvider({ children }: { children: ReactNode }) {\n  const [status, setStatus] = useState<ConnectionStatus>(\"disconnected\");\n  const [events, setEvents] = useState<GatewayEvent[]>([]);\n  const [operatorAgentId, setOperatorAgentIdState] = useState<string | null>(\n    null\n  );\n\n  const wsRef = useRef<WebSocket | null>(null);\n  const pendingRef = useRef<Map<string, PendingRequest>>(new Map());\n  const streamRef = useRef<Map<string, StreamHandler>>(new Map());\n  const reconnectRef = useRef<number>(0);\n  const reconnectTimerRef = useRef<ReturnType<typeof setTimeout> | null>(null);\n  const authTokenRef = useRef<string>(\"\");\n  const statusRef = useRef<ConnectionStatus>(\"disconnected\");\n  /** When true the close handler should NOT auto-reconnect */\n  const intentionalCloseRef = useRef(false);\n  /** Stable ref so the close-handler always calls the latest `connect` */\n  const connectRef = useRef<() => void>(() => {});\n\n  useEffect(() => {\n    const savedToken =\n      typeof window !== \"undefined\"\n        ? localStorage.getItem(\"gatewayAuthToken\") || \"\"\n        : \"\";\n    const savedAgent =\n      typeof window !== \"undefined\"\n        ? localStorage.getItem(\"operatorAgentId\") || null\n        : null;\n    authTokenRef.current = savedToken;\n    setOperatorAgentIdState(savedAgent);\n  }, []);\n\n  /* ------------------------------------------------------------------ */\n  /* Helper: push a gateway event into state                            */\n  /* ------------------------------------------------------------------ */\n  const pushEvent = useCallback((event: GatewayEvent) => {\n    setEvents((prev) => [event, ...prev].slice(0, MAX_EVENTS));\n  }, []);\n\n  /* ------------------------------------------------------------------ */\n  /* onConnected — runs after auth_success (or immediate open if no token) */\n  /* ------------------------------------------------------------------ */\n  const onConnectedRef = useRef<(socket: WebSocket) => void>(() => {});\n  onConnectedRef.current = (socket: WebSocket) => {\n    statusRef.current = \"connected\";\n    setStatus(\"connected\");\n    reconnectRef.current = 0;\n    socket.send(JSON.stringify(agentStatusMessage()));\n    socket.send(\n      JSON.stringify(\n        subscribeMessage([\"agent.lifecycle\", \"system\", \"audit\", \"*\"])\n      )\n    );\n    pushEvent({\n      type: \"connection\",\n      summary: \"Connected to gateway\",\n      timestamp: new Date().toLocaleTimeString(),\n    });\n  };\n\n  /* ------------------------------------------------------------------ */\n  /* handleMessage — dispatches incoming WebSocket messages              */\n  /* ------------------------------------------------------------------ */\n  const handleMessageRef = useRef<(event: MessageEvent) => void>(() => {});\n  handleMessageRef.current = (event: MessageEvent) => {\n    let message: WsMessage;\n    try {\n      message = JSON.parse(event.data as string);\n    } catch {\n      return;\n    }\n\n    // Handle pending request/response correlation\n    if (message.id && pendingRef.current.has(message.id)) {\n      const pending = pendingRef.current.get(message.id)!;\n      pendingRef.current.delete(message.id);\n      clearTimeout(pending.timeoutId);\n      pending.resolve(message);\n      return;\n    }\n\n    // Handle streaming chat deltas\n    if (message.type === \"chat_stream\" && message.id) {\n      const handler = streamRef.current.get(message.id);\n      if (handler) {\n        const delta =\n          (message.payload?.delta as string) || \"\";\n        handler.accumulated += delta;\n        handler.onDelta(delta);\n      }\n      return;\n    }\n\n    if (message.type === \"chat_stream_end\" && message.id) {\n      const handler = streamRef.current.get(message.id);\n      if (handler) {\n        streamRef.current.delete(message.id);\n        handler.resolve({\n          content: handler.accumulated,\n          model: message.payload?.model as string | undefined,\n          usage: message.payload?.usage as TokenUsage | undefined,\n        });\n      }\n      return;\n    }\n\n    // Auth flow\n    if (message.type === \"auth_success\") {\n      onConnectedRef.current(wsRef.current!);\n      return;\n    }\n\n    if (message.type === \"auth_required\") {\n      statusRef.current = \"auth_required\";\n      setStatus(\"auth_required\");\n      if (authTokenRef.current) {\n        wsRef.current?.send(\n          JSON.stringify(authMessage(authTokenRef.current))\n        );\n      }\n      return;\n    }\n\n    if (message.type === \"auth_failed\") {\n      statusRef.current = \"auth_failed\";\n      setStatus(\"auth_failed\");\n      pushEvent({\n        type: \"auth\",\n        summary:\n          (message.payload?.message as string) || \"Authentication failed\",\n        timestamp: new Date().toLocaleTimeString(),\n      });\n      return;\n    }\n\n    // Events\n    if (message.type === \"event\" && message.payload) {\n      const payload = message.payload;\n      pushEvent({\n        type: (payload.type as string) || \"event\",\n        summary: payload.channel\n          ? `${payload.channel} ${payload.data ? JSON.stringify(payload.data) : \"\"}`\n          : \"\",\n        timestamp: new Date(\n          (payload.timestamp as string) || Date.now()\n        ).toLocaleTimeString(),\n        channel: payload.channel as string | undefined,\n      });\n      return;\n    }\n\n    // Errors\n    if (message.type === \"error\") {\n      pushEvent({\n        type: \"error\",\n        summary: (message.payload?.message as string) || \"Gateway error\",\n        timestamp: new Date().toLocaleTimeString(),\n      });\n    }\n  };\n\n  /* ------------------------------------------------------------------ */\n  /* connect — opens a new WebSocket to the gateway                     */\n  /* Uses refs so the function identity never changes and the useEffect */\n  /* that calls it only runs once (on mount).                           */\n  /* ------------------------------------------------------------------ */\n  const connect = useCallback(() => {\n    // Cancel any pending reconnect timer\n    if (reconnectTimerRef.current) {\n      clearTimeout(reconnectTimerRef.current);\n      reconnectTimerRef.current = null;\n    }\n\n    // Close existing socket without triggering auto-reconnect\n    if (wsRef.current) {\n      intentionalCloseRef.current = true;\n      wsRef.current.close();\n    }\n\n    statusRef.current = \"connecting\";\n    setStatus(\"connecting\");\n\n    const socket = new WebSocket(getWsUrl());\n    wsRef.current = socket;\n\n    socket.addEventListener(\"open\", () => {\n      if (authTokenRef.current) {\n        socket.send(JSON.stringify(authMessage(authTokenRef.current)));\n      } else {\n        onConnectedRef.current(socket);\n      }\n    });\n\n    socket.addEventListener(\"close\", () => {\n      // If this socket is no longer the active one, ignore\n      if (wsRef.current !== socket) return;\n\n      statusRef.current = \"disconnected\";\n      setStatus(\"disconnected\");\n\n      // Don't auto-reconnect if the close was intentional (we're\n      // already opening a new connection from connect() or authenticate())\n      if (intentionalCloseRef.current) {\n        intentionalCloseRef.current = false;\n        return;\n      }\n\n      // Exponential backoff reconnect\n      const delay = Math.min(\n        RECONNECT_BASE_MS * Math.pow(2, reconnectRef.current),\n        RECONNECT_MAX_MS\n      );\n      reconnectRef.current += 1;\n      reconnectTimerRef.current = setTimeout(\n        () => connectRef.current(),\n        delay\n      );\n    });\n\n    socket.addEventListener(\"message\", (ev) => handleMessageRef.current(ev));\n\n    socket.addEventListener(\"error\", () => {\n      // close handler manages reconnection\n    });\n  }, []);\n\n  // Keep connectRef in sync so the close-handler's setTimeout always\n  // calls the latest version (though with [] deps it never changes).\n  connectRef.current = connect;\n\n  useEffect(() => {\n    connect();\n    return () => {\n      if (reconnectTimerRef.current) {\n        clearTimeout(reconnectTimerRef.current);\n      }\n      if (wsRef.current) {\n        intentionalCloseRef.current = true;\n        wsRef.current.close();\n      }\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const sendRequest = useCallback(\n    (message: WsMessage): Promise<WsMessage> => {\n      if (!wsRef.current || wsRef.current.readyState !== WebSocket.OPEN) {\n        return Promise.reject(new Error(\"Not connected\"));\n      }\n      return new Promise((resolve, reject) => {\n        const timeoutId = setTimeout(() => {\n          pendingRef.current.delete(message.id);\n          reject(new Error(\"Request timeout\"));\n        }, REQUEST_TIMEOUT_MS);\n\n        pendingRef.current.set(message.id, { resolve, reject, timeoutId });\n        wsRef.current!.send(JSON.stringify(message));\n      });\n    },\n    []\n  );\n\n  const sendAgentTask = useCallback(\n    async (\n      agentId: string,\n      task: Record<string, unknown>\n    ): Promise<unknown> => {\n      const response = await sendRequest(agentTaskMessage(agentId, task));\n      if (response.type === \"agent_task_result\") {\n        if (response.payload?.status === \"ok\") {\n          return response.payload.result;\n        }\n        throw new Error(\n          (response.payload?.error as string) || \"Task failed\"\n        );\n      }\n      if (response.type === \"error\") {\n        throw new Error(\n          (response.payload?.message as string) || \"Gateway error\"\n        );\n      }\n      throw new Error(\"Unexpected response\");\n    },\n    [sendRequest]\n  );\n\n  const sendStreamingChat = useCallback(\n    (\n      messages: ChatMessage[],\n      onDelta: (delta: string) => void,\n      options?: { model?: string; maxTokens?: number; temperature?: number }\n    ): Promise<{ content: string; model?: string; usage?: TokenUsage }> => {\n      if (!wsRef.current || wsRef.current.readyState !== WebSocket.OPEN) {\n        return Promise.reject(new Error(\"Not connected\"));\n      }\n\n      const msg = chatMessage(messages, { ...options, stream: true });\n\n      return new Promise((resolve, reject) => {\n        streamRef.current.set(msg.id, {\n          onDelta,\n          accumulated: \"\",\n          resolve,\n          reject,\n        });\n\n        const timeoutId = setTimeout(() => {\n          if (streamRef.current.has(msg.id)) {\n            const handler = streamRef.current.get(msg.id)!;\n            streamRef.current.delete(msg.id);\n            if (handler.accumulated) {\n              handler.resolve({ content: handler.accumulated });\n            } else {\n              handler.reject(new Error(\"Stream timeout\"));\n            }\n          }\n        }, 60_000);\n\n        wsRef.current!.send(JSON.stringify(msg));\n\n        // Clean up timeout on completion\n        const originalResolve = resolve;\n        const originalReject = reject;\n        const handler = streamRef.current.get(msg.id);\n        if (handler) {\n          handler.resolve = (result) => {\n            clearTimeout(timeoutId);\n            originalResolve(result);\n          };\n          handler.reject = (err) => {\n            clearTimeout(timeoutId);\n            originalReject(err);\n          };\n        }\n      });\n    },\n    []\n  );\n\n  const authenticate = useCallback(\n    (token: string) => {\n      authTokenRef.current = token;\n      if (typeof window !== \"undefined\") {\n        localStorage.setItem(\"gatewayAuthToken\", token);\n      }\n      // Reconnect with new token — connect() handles intentional close internally\n      reconnectRef.current = 0;\n      connect();\n    },\n    [connect]\n  );\n\n  const setOperatorAgentId = useCallback((id: string | null) => {\n    setOperatorAgentIdState(id);\n    if (typeof window !== \"undefined\") {\n      if (id) {\n        localStorage.setItem(\"operatorAgentId\", id);\n      } else {\n        localStorage.removeItem(\"operatorAgentId\");\n      }\n    }\n  }, []);\n\n  return (\n    <WebSocketContext.Provider\n      value={{\n        status,\n        authenticate,\n        sendRequest,\n        sendAgentTask: (agentId: string, task: Record<string, unknown>) =>\n          sendAgentTask(agentId, task),\n        sendStreamingChat,\n        events,\n        operatorAgentId,\n        setOperatorAgentId,\n      }}\n    >\n      {children}\n    </WebSocketContext.Provider>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 475, "column": 0}, "map": {"version":3,"sources":["file:///Users/vijaygopalb/AgentOS/apps/dashboard/src/hooks/useWebSocket.ts"],"sourcesContent":["\"use client\";\n\nimport { useContext } from \"react\";\nimport {\n  WebSocketContext,\n  type WebSocketContextValue,\n} from \"@/providers/WebSocketProvider\";\n\nexport function useWebSocket(): WebSocketContextValue {\n  const ctx = useContext(WebSocketContext);\n  if (!ctx) {\n    throw new Error(\"useWebSocket must be used within a WebSocketProvider\");\n  }\n  return ctx;\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AAHA;;;AAQO,SAAS;IACd,MAAM,MAAM,IAAA,kVAAU,EAAC,+KAAgB;IACvC,IAAI,CAAC,KAAK;QACR,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT"}},
    {"offset": {"line": 495, "column": 0}, "map": {"version":3,"sources":["file:///Users/vijaygopalb/AgentOS/apps/dashboard/src/hooks/useAgents.ts"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect, useCallback } from \"react\";\nimport type { AgentInfo } from \"@/lib/types\";\nimport { useWebSocket } from \"./useWebSocket\";\nimport {\n  agentStatusMessage,\n  agentSpawnMessage,\n  agentTerminateMessage,\n} from \"@/lib/ws-client\";\n\nconst POLL_INTERVAL = 10_000;\n\nexport function useAgents() {\n  const { status, sendRequest } = useWebSocket();\n  const [agents, setAgents] = useState<AgentInfo[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  const refresh = useCallback(async () => {\n    if (status !== \"connected\") return;\n    try {\n      setLoading(true);\n      const response = await sendRequest(agentStatusMessage());\n      if (response.type === \"agent_list\" && response.payload) {\n        setAgents(\n          (response.payload.agents as AgentInfo[]) || []\n        );\n        setError(null);\n      }\n    } catch (err) {\n      setError(err instanceof Error ? err.message : \"Failed to fetch agents\");\n    } finally {\n      setLoading(false);\n    }\n  }, [status, sendRequest]);\n\n  useEffect(() => {\n    if (status === \"connected\") {\n      refresh();\n      const interval = setInterval(refresh, POLL_INTERVAL);\n      return () => clearInterval(interval);\n    }\n  }, [status, refresh]);\n\n  const spawn = useCallback(\n    async (manifest: Record<string, unknown>) => {\n      const response = await sendRequest(agentSpawnMessage(manifest));\n      if (response.type === \"error\") {\n        throw new Error(\n          (response.payload?.message as string) || \"Failed to spawn agent\"\n        );\n      }\n      await refresh();\n      return response;\n    },\n    [sendRequest, refresh]\n  );\n\n  const terminate = useCallback(\n    async (agentId: string, force = false) => {\n      const response = await sendRequest(\n        agentTerminateMessage(agentId, force)\n      );\n      if (response.type === \"error\") {\n        throw new Error(\n          (response.payload?.message as string) ||\n            \"Failed to terminate agent\"\n        );\n      }\n      await refresh();\n      return response;\n    },\n    [sendRequest, refresh]\n  );\n\n  return { agents, loading, error, refresh, spawn, terminate };\n}\n"],"names":[],"mappings":";;;;AAEA;AAEA;AACA;AALA;;;;AAWA,MAAM,gBAAgB;AAEf,SAAS;IACd,MAAM,EAAE,MAAM,EAAE,WAAW,EAAE,GAAG,IAAA,iKAAY;IAC5C,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,gVAAQ,EAAc,EAAE;IACpD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,gVAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,gVAAQ,EAAgB;IAElD,MAAM,UAAU,IAAA,mVAAW,EAAC;QAC1B,IAAI,WAAW,aAAa;QAC5B,IAAI;YACF,WAAW;YACX,MAAM,WAAW,MAAM,YAAY,IAAA,qKAAkB;YACrD,IAAI,SAAS,IAAI,KAAK,gBAAgB,SAAS,OAAO,EAAE;gBACtD,UACE,AAAC,SAAS,OAAO,CAAC,MAAM,IAAoB,EAAE;gBAEhD,SAAS;YACX;QACF,EAAE,OAAO,KAAK;YACZ,SAAS,eAAe,QAAQ,IAAI,OAAO,GAAG;QAChD,SAAU;YACR,WAAW;QACb;IACF,GAAG;QAAC;QAAQ;KAAY;IAExB,IAAA,iVAAS,EAAC;QACR,IAAI,WAAW,aAAa;YAC1B;YACA,MAAM,WAAW,YAAY,SAAS;YACtC,OAAO,IAAM,cAAc;QAC7B;IACF,GAAG;QAAC;QAAQ;KAAQ;IAEpB,MAAM,QAAQ,IAAA,mVAAW,EACvB,OAAO;QACL,MAAM,WAAW,MAAM,YAAY,IAAA,oKAAiB,EAAC;QACrD,IAAI,SAAS,IAAI,KAAK,SAAS;YAC7B,MAAM,IAAI,MACR,AAAC,SAAS,OAAO,EAAE,WAAsB;QAE7C;QACA,MAAM;QACN,OAAO;IACT,GACA;QAAC;QAAa;KAAQ;IAGxB,MAAM,YAAY,IAAA,mVAAW,EAC3B,OAAO,SAAiB,QAAQ,KAAK;QACnC,MAAM,WAAW,MAAM,YACrB,IAAA,wKAAqB,EAAC,SAAS;QAEjC,IAAI,SAAS,IAAI,KAAK,SAAS;YAC7B,MAAM,IAAI,MACR,AAAC,SAAS,OAAO,EAAE,WACjB;QAEN;QACA,MAAM;QACN,OAAO;IACT,GACA;QAAC;QAAa;KAAQ;IAGxB,OAAO;QAAE;QAAQ;QAAS;QAAO;QAAS;QAAO;IAAU;AAC7D"}},
    {"offset": {"line": 575, "column": 0}, "map": {"version":3,"sources":["file:///Users/vijaygopalb/AgentOS/apps/dashboard/src/components/shell/SystemTray.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport { useWebSocket } from \"@/hooks/useWebSocket\";\nimport { useAgents } from \"@/hooks/useAgents\";\n\nexport function SystemTray() {\n  const { status } = useWebSocket();\n  const { agents } = useAgents();\n  const [time, setTime] = useState(\"\");\n\n  useEffect(() => {\n    const tick = () => {\n      const now = new Date();\n      setTime(\n        now.toLocaleTimeString([], { hour: \"2-digit\", minute: \"2-digit\" })\n      );\n    };\n    tick();\n    const id = setInterval(tick, 30_000);\n    return () => clearInterval(id);\n  }, []);\n\n  const runningCount = agents.filter(\n    (a) => a.state === \"running\" || a.state === \"idle\"\n  ).length;\n\n  const statusColor =\n    status === \"connected\"\n      ? \"bg-ctp-green\"\n      : status === \"auth_failed\"\n        ? \"bg-ctp-red\"\n        : \"bg-ctp-yellow\";\n\n  return (\n    <div className=\"flex items-center gap-4 text-xs font-mono text-ctp-subtext0\">\n      <div className=\"flex items-center gap-1.5\" title={`Gateway: ${status}`}>\n        <span className={`w-2 h-2 rounded-full ${statusColor}`} />\n        <span className=\"hidden sm:inline\">{status}</span>\n      </div>\n      <div className=\"flex items-center gap-1.5\" title={`${runningCount} agent(s) running`}>\n        <svg width=\"12\" height=\"12\" viewBox=\"0 0 16 16\" fill=\"currentColor\">\n          <path d=\"M5 3a3 3 0 1 1 6 0 3 3 0 0 1-6 0zm-1 8a4 4 0 0 1 8 0v1H4v-1z\" />\n        </svg>\n        <span>{runningCount}</span>\n      </div>\n      <div className=\"text-ctp-subtext1 font-medium tabular-nums\">\n        {time}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAMO,SAAS;IACd,MAAM,EAAE,MAAM,EAAE,GAAG,IAAA,iKAAY;IAC/B,MAAM,EAAE,MAAM,EAAE,GAAG,IAAA,2JAAS;IAC5B,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,gVAAQ,EAAC;IAEjC,IAAA,iVAAS,EAAC;QACR,MAAM,OAAO;YACX,MAAM,MAAM,IAAI;YAChB,QACE,IAAI,kBAAkB,CAAC,EAAE,EAAE;gBAAE,MAAM;gBAAW,QAAQ;YAAU;QAEpE;QACA;QACA,MAAM,KAAK,YAAY,MAAM;QAC7B,OAAO,IAAM,cAAc;IAC7B,GAAG,EAAE;IAEL,MAAM,eAAe,OAAO,MAAM,CAChC,CAAC,IAAM,EAAE,KAAK,KAAK,aAAa,EAAE,KAAK,KAAK,QAC5C,MAAM;IAER,MAAM,cACJ,WAAW,cACP,iBACA,WAAW,gBACT,eACA;IAER,qBACE,6WAAC;QAAI,WAAU;;0BACb,6WAAC;gBAAI,WAAU;gBAA4B,OAAO,CAAC,SAAS,EAAE,QAAQ;;kCACpE,6WAAC;wBAAK,WAAW,CAAC,qBAAqB,EAAE,aAAa;;;;;;kCACtD,6WAAC;wBAAK,WAAU;kCAAoB;;;;;;;;;;;;0BAEtC,6WAAC;gBAAI,WAAU;gBAA4B,OAAO,GAAG,aAAa,iBAAiB,CAAC;;kCAClF,6WAAC;wBAAI,OAAM;wBAAK,QAAO;wBAAK,SAAQ;wBAAY,MAAK;kCACnD,cAAA,6WAAC;4BAAK,GAAE;;;;;;;;;;;kCAEV,6WAAC;kCAAM;;;;;;;;;;;;0BAET,6WAAC;gBAAI,WAAU;0BACZ;;;;;;;;;;;;AAIT"}},
    {"offset": {"line": 687, "column": 0}, "map": {"version":3,"sources":["file:///Users/vijaygopalb/AgentOS/apps/dashboard/src/components/shell/TopPanel.tsx"],"sourcesContent":["\"use client\";\n\nimport { SystemTray } from \"./SystemTray\";\n\nexport function TopPanel() {\n  return (\n    <header className=\"h-8 bg-ctp-crust border-b border-ctp-surface0 flex items-center justify-between px-4 select-none shrink-0\">\n      {/* Left — wordmark */}\n      <div className=\"flex items-center gap-2\">\n        <span className=\"font-mono font-bold text-xs text-ctp-blue tracking-wider\">\n          AgentOS\n        </span>\n      </div>\n\n      {/* Right — system tray */}\n      <SystemTray />\n    </header>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAIO,SAAS;IACd,qBACE,6WAAC;QAAO,WAAU;;0BAEhB,6WAAC;gBAAI,WAAU;0BACb,cAAA,6WAAC;oBAAK,WAAU;8BAA2D;;;;;;;;;;;0BAM7E,6WAAC,4KAAU;;;;;;;;;;;AAGjB"}},
    {"offset": {"line": 749, "column": 0}, "map": {"version":3,"sources":["file:///Users/vijaygopalb/AgentOS/apps/dashboard/src/components/shell/Taskbar.tsx"],"sourcesContent":["\"use client\";\n\nimport Link from \"next/link\";\nimport { usePathname } from \"next/navigation\";\n\nconst NAV_ITEMS = [\n  {\n    href: \"/\",\n    label: \"Monitor\",\n    icon: (\n      <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n        <rect x=\"2\" y=\"3\" width=\"20\" height=\"14\" rx=\"2\" />\n        <path d=\"M8 21h8M12 17v4\" />\n        <path d=\"M6 10h2M10 8h2M14 11h2M18 9h2\" />\n      </svg>\n    ),\n  },\n  {\n    href: \"/chat\",\n    label: \"Terminal\",\n    icon: (\n      <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n        <polyline points=\"4 17 10 11 4 5\" />\n        <line x1=\"12\" y1=\"19\" x2=\"20\" y2=\"19\" />\n      </svg>\n    ),\n  },\n  {\n    href: \"/agents\",\n    label: \"Tasks\",\n    icon: (\n      <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n        <rect x=\"2\" y=\"3\" width=\"20\" height=\"18\" rx=\"2\" />\n        <path d=\"M6 8h12M6 12h12M6 16h8\" />\n      </svg>\n    ),\n  },\n  {\n    href: \"/memory\",\n    label: \"Files\",\n    icon: (\n      <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n        <path d=\"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z\" />\n      </svg>\n    ),\n  },\n  {\n    href: \"/security\",\n    label: \"Security\",\n    icon: (\n      <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n        <path d=\"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z\" />\n      </svg>\n    ),\n  },\n  {\n    href: \"/settings\",\n    label: \"Prefs\",\n    icon: (\n      <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n        <circle cx=\"12\" cy=\"12\" r=\"3\" />\n        <path d=\"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 1 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 1 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 1 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z\" />\n      </svg>\n    ),\n  },\n];\n\nexport function Taskbar() {\n  const pathname = usePathname();\n\n  return (\n    <nav className=\"h-14 bg-ctp-crust/95 backdrop-blur-sm border-t border-ctp-surface0 flex items-center justify-center gap-1 px-4 select-none shrink-0\">\n      {NAV_ITEMS.map((item) => {\n        const isActive =\n          item.href === \"/\" ? pathname === \"/\" : pathname.startsWith(item.href);\n\n        return (\n          <Link\n            key={item.href}\n            href={item.href}\n            className={`flex flex-col items-center gap-0.5 px-4 py-1.5 rounded-panel transition-colors ${\n              isActive\n                ? \"text-ctp-blue bg-ctp-blue/10\"\n                : \"text-ctp-overlay1 hover:text-ctp-text hover:bg-ctp-surface0/50\"\n            }`}\n          >\n            {item.icon}\n            <span className=\"text-2xs font-mono font-medium\">{item.label}</span>\n          </Link>\n        );\n      })}\n    </nav>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAKA,MAAM,YAAY;IAChB;QACE,MAAM;QACN,OAAO;QACP,oBACE,6WAAC;YAAI,OAAM;YAAK,QAAO;YAAK,SAAQ;YAAY,MAAK;YAAO,QAAO;YAAe,aAAY;YAAM,eAAc;YAAQ,gBAAe;;8BACvI,6WAAC;oBAAK,GAAE;oBAAI,GAAE;oBAAI,OAAM;oBAAK,QAAO;oBAAK,IAAG;;;;;;8BAC5C,6WAAC;oBAAK,GAAE;;;;;;8BACR,6WAAC;oBAAK,GAAE;;;;;;;;;;;;IAGd;IACA;QACE,MAAM;QACN,OAAO;QACP,oBACE,6WAAC;YAAI,OAAM;YAAK,QAAO;YAAK,SAAQ;YAAY,MAAK;YAAO,QAAO;YAAe,aAAY;YAAM,eAAc;YAAQ,gBAAe;;8BACvI,6WAAC;oBAAS,QAAO;;;;;;8BACjB,6WAAC;oBAAK,IAAG;oBAAK,IAAG;oBAAK,IAAG;oBAAK,IAAG;;;;;;;;;;;;IAGvC;IACA;QACE,MAAM;QACN,OAAO;QACP,oBACE,6WAAC;YAAI,OAAM;YAAK,QAAO;YAAK,SAAQ;YAAY,MAAK;YAAO,QAAO;YAAe,aAAY;YAAM,eAAc;YAAQ,gBAAe;;8BACvI,6WAAC;oBAAK,GAAE;oBAAI,GAAE;oBAAI,OAAM;oBAAK,QAAO;oBAAK,IAAG;;;;;;8BAC5C,6WAAC;oBAAK,GAAE;;;;;;;;;;;;IAGd;IACA;QACE,MAAM;QACN,OAAO;QACP,oBACE,6WAAC;YAAI,OAAM;YAAK,QAAO;YAAK,SAAQ;YAAY,MAAK;YAAO,QAAO;YAAe,aAAY;YAAM,eAAc;YAAQ,gBAAe;sBACvI,cAAA,6WAAC;gBAAK,GAAE;;;;;;;;;;;IAGd;IACA;QACE,MAAM;QACN,OAAO;QACP,oBACE,6WAAC;YAAI,OAAM;YAAK,QAAO;YAAK,SAAQ;YAAY,MAAK;YAAO,QAAO;YAAe,aAAY;YAAM,eAAc;YAAQ,gBAAe;sBACvI,cAAA,6WAAC;gBAAK,GAAE;;;;;;;;;;;IAGd;IACA;QACE,MAAM;QACN,OAAO;QACP,oBACE,6WAAC;YAAI,OAAM;YAAK,QAAO;YAAK,SAAQ;YAAY,MAAK;YAAO,QAAO;YAAe,aAAY;YAAM,eAAc;YAAQ,gBAAe;;8BACvI,6WAAC;oBAAO,IAAG;oBAAK,IAAG;oBAAK,GAAE;;;;;;8BAC1B,6WAAC;oBAAK,GAAE;;;;;;;;;;;;IAGd;CACD;AAEM,SAAS;IACd,MAAM,WAAW,IAAA,gRAAW;IAE5B,qBACE,6WAAC;QAAI,WAAU;kBACZ,UAAU,GAAG,CAAC,CAAC;YACd,MAAM,WACJ,KAAK,IAAI,KAAK,MAAM,aAAa,MAAM,SAAS,UAAU,CAAC,KAAK,IAAI;YAEtE,qBACE,6WAAC,sSAAI;gBAEH,MAAM,KAAK,IAAI;gBACf,WAAW,CAAC,+EAA+E,EACzF,WACI,iCACA,kEACJ;;oBAED,KAAK,IAAI;kCACV,6WAAC;wBAAK,WAAU;kCAAkC,KAAK,KAAK;;;;;;;eATvD,KAAK,IAAI;;;;;QAYpB;;;;;;AAGN"}},
    {"offset": {"line": 1004, "column": 0}, "map": {"version":3,"sources":["file:///Users/vijaygopalb/AgentOS/apps/dashboard/src/components/shell/DesktopShell.tsx"],"sourcesContent":["\"use client\";\n\nimport { type ReactNode } from \"react\";\nimport { TopPanel } from \"./TopPanel\";\nimport { Taskbar } from \"./Taskbar\";\n\ninterface DesktopShellProps {\n  children: ReactNode;\n}\n\nexport function DesktopShell({ children }: DesktopShellProps) {\n  return (\n    <div className=\"h-screen flex flex-col overflow-hidden\">\n      <TopPanel />\n      <main className=\"flex-1 overflow-auto p-4 lg:p-6\">{children}</main>\n      <Taskbar />\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAGA;AACA;AAJA;;;;AAUO,SAAS,aAAa,EAAE,QAAQ,EAAqB;IAC1D,qBACE,6WAAC;QAAI,WAAU;;0BACb,6WAAC,wKAAQ;;;;;0BACT,6WAAC;gBAAK,WAAU;0BAAmC;;;;;;0BACnD,6WAAC,sKAAO;;;;;;;;;;;AAGd"}},
    {"offset": {"line": 1048, "column": 0}, "map": {"version":3,"sources":["file:///Users/vijaygopalb/AgentOS/apps/dashboard/src/app/layout.tsx"],"sourcesContent":["\"use client\";\n\nimport \"@/styles/globals.css\";\nimport { WebSocketProvider } from \"@/providers/WebSocketProvider\";\nimport { DesktopShell } from \"@/components/shell/DesktopShell\";\nimport { Component, type ErrorInfo, type ReactNode } from \"react\";\n\n/** Global error boundary to prevent white-screen crashes */\nclass ErrorBoundary extends Component<\n  { children: ReactNode },\n  { hasError: boolean; error: Error | null }\n> {\n  constructor(props: { children: ReactNode }) {\n    super(props);\n    this.state = { hasError: false, error: null };\n  }\n\n  static getDerivedStateFromError(error: Error) {\n    return { hasError: true, error };\n  }\n\n  componentDidCatch(error: Error, info: ErrorInfo) {\n    console.error(\"[AgentOS] Uncaught render error:\", error, info.componentStack);\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return (\n        <div className=\"min-h-screen flex items-center justify-center bg-ctp-base p-8\">\n          <div className=\"max-w-lg w-full bg-ctp-mantle border border-ctp-red/30 rounded-window p-8\">\n            <h2 className=\"text-lg font-mono font-bold text-ctp-red mb-2\">\n              Kernel Panic\n            </h2>\n            <p className=\"text-sm text-ctp-subtext0 mb-4\">\n              The dashboard encountered a fatal error. Try restarting.\n            </p>\n            <pre className=\"text-xs text-ctp-red/70 bg-ctp-crust rounded-panel p-3 overflow-auto max-h-40 mb-4 font-mono\">\n              {this.state.error?.message}\n            </pre>\n            <button\n              onClick={() => {\n                this.setState({ hasError: false, error: null });\n                window.location.reload();\n              }}\n              className=\"px-4 py-2 text-sm font-mono font-medium bg-ctp-blue/20 text-ctp-blue rounded-input hover:bg-ctp-blue/30 transition-colors\"\n            >\n              Reboot\n            </button>\n          </div>\n        </div>\n      );\n    }\n\n    return this.props.children;\n  }\n}\n\nexport default function RootLayout({\n  children,\n}: {\n  children: React.ReactNode;\n}) {\n  return (\n    <html lang=\"en\">\n      <head>\n        <title>AgentOS</title>\n        <meta\n          name=\"description\"\n          content=\"AgentOS — Operating System for AI Agents\"\n        />\n        <link rel=\"icon\" href=\"/favicon.svg\" type=\"image/svg+xml\" />\n      </head>\n      <body>\n        <ErrorBoundary>\n          <WebSocketProvider>\n            <DesktopShell>{children}</DesktopShell>\n          </WebSocketProvider>\n        </ErrorBoundary>\n      </body>\n    </html>\n  );\n}\n"],"names":[],"mappings":";;;;;AAGA;AACA;AACA;AALA;;;;;;AAOA,0DAA0D,GAC1D,MAAM,sBAAsB,iVAAS;IAInC,YAAY,KAA8B,CAAE;QAC1C,KAAK,CAAC;QACN,IAAI,CAAC,KAAK,GAAG;YAAE,UAAU;YAAO,OAAO;QAAK;IAC9C;IAEA,OAAO,yBAAyB,KAAY,EAAE;QAC5C,OAAO;YAAE,UAAU;YAAM;QAAM;IACjC;IAEA,kBAAkB,KAAY,EAAE,IAAe,EAAE;QAC/C,QAAQ,KAAK,CAAC,oCAAoC,OAAO,KAAK,cAAc;IAC9E;IAEA,SAAS;QACP,IAAI,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE;YACvB,qBACE,6WAAC;gBAAI,WAAU;0BACb,cAAA,6WAAC;oBAAI,WAAU;;sCACb,6WAAC;4BAAG,WAAU;sCAAgD;;;;;;sCAG9D,6WAAC;4BAAE,WAAU;sCAAiC;;;;;;sCAG9C,6WAAC;4BAAI,WAAU;sCACZ,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE;;;;;;sCAErB,6WAAC;4BACC,SAAS;gCACP,IAAI,CAAC,QAAQ,CAAC;oCAAE,UAAU;oCAAO,OAAO;gCAAK;gCAC7C,OAAO,QAAQ,CAAC,MAAM;4BACxB;4BACA,WAAU;sCACX;;;;;;;;;;;;;;;;;QAMT;QAEA,OAAO,IAAI,CAAC,KAAK,CAAC,QAAQ;IAC5B;AACF;AAEe,SAAS,WAAW,EACjC,QAAQ,EAGT;IACC,qBACE,6WAAC;QAAK,MAAK;;0BACT,6WAAC;;kCACC,6WAAC;kCAAM;;;;;;kCACP,6WAAC;wBACC,MAAK;wBACL,SAAQ;;;;;;kCAEV,6WAAC;wBAAK,KAAI;wBAAO,MAAK;wBAAe,MAAK;;;;;;;;;;;;0BAE5C,6WAAC;0BACC,cAAA,6WAAC;8BACC,cAAA,6WAAC,gLAAiB;kCAChB,cAAA,6WAAC,gLAAY;sCAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;AAM3B"}}]
}