(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,43332,e=>{"use strict";var t=e.i(87433);let s={primary:"bg-ctp-blue text-ctp-crust font-medium hover:bg-ctp-lavender active:bg-ctp-sapphire",ghost:"bg-ctp-surface0 text-ctp-subtext1 hover:bg-ctp-surface1 hover:text-ctp-text active:bg-ctp-surface2",danger:"bg-ctp-red/15 text-ctp-red hover:bg-ctp-red/25 active:bg-ctp-red/35"};function n({variant:e="primary",children:n,className:a="",disabled:l,...r}){return(0,t.jsx)("button",{className:`px-4 py-2 rounded-input text-sm transition-colors duration-150 cursor-pointer disabled:opacity-40 disabled:cursor-not-allowed ${s[e]} ${a}`,disabled:l,...r,children:n})}e.s(["Button",()=>n])},23889,e=>{"use strict";var t=e.i(87433),s=e.i(44440),n=e.i(62924);function a({title:e,icon:a,children:l,className:r,noPadding:o}){let c=(0,n.useRouter)(),[i,d]=(0,s.useState)(!1);return(0,t.jsxs)("div",{className:`flex flex-col bg-ctp-mantle border border-ctp-surface0 rounded-window shadow-lg shadow-black/20 overflow-hidden ${r??""}`,children:[(0,t.jsxs)("div",{className:"window-titlebar shrink-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1.5 mr-2",children:[(0,t.jsx)("button",{onClick:()=>c.push("/"),className:"w-3 h-3 rounded-full bg-ctp-red hover:brightness-110 transition-all",title:"Close â€” go to desktop"}),(0,t.jsx)("button",{onClick:()=>d(!i),className:"w-3 h-3 rounded-full bg-ctp-yellow hover:brightness-110 transition-all",title:i?"Restore":"Minimize"}),(0,t.jsx)("button",{onClick:()=>d(!1),className:"w-3 h-3 rounded-full bg-ctp-green hover:brightness-110 transition-all",title:"Maximize"})]}),a&&(0,t.jsx)("span",{className:"text-ctp-subtext0",children:a}),(0,t.jsx)("span",{className:"text-xs font-mono font-medium text-ctp-subtext1 truncate",children:e})]}),!i&&(0,t.jsx)("div",{className:`flex-1 overflow-auto ${o?"":"p-4"}`,children:l}),i&&(0,t.jsx)("div",{className:"px-4 py-6 text-center",children:(0,t.jsx)("button",{onClick:()=>d(!1),className:"text-xs font-mono text-ctp-overlay0 hover:text-ctp-text transition-colors",children:"Click to restore window"})})]})}e.s(["Window",()=>a])},32372,e=>{"use strict";var t=e.i(87433);function s({message:e,hint:s,className:n=""}){return(0,t.jsxs)("div",{className:`py-8 text-center font-mono ${n}`,children:[(0,t.jsx)("div",{className:"text-sm text-ctp-overlay0",children:e}),s&&(0,t.jsx)("div",{className:"text-xs text-ctp-overlay0/70 mt-1",children:s})]})}e.s(["EmptyState",()=>s])},71798,e=>{"use strict";var t=e.i(87433),s=e.i(44440),n=e.i(23889);function a({message:e}){let s="user"===e.role;return(0,t.jsxs)("div",{className:"mb-3 font-mono",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-xs mb-0.5",children:[(0,t.jsx)("span",{className:s?"text-ctp-green":"text-ctp-mauve",children:s?"user $":`${e.agentName||"system"} >`}),(0,t.jsx)("span",{className:"text-ctp-overlay0 text-2xs",children:e.timestamp}),e.model&&(0,t.jsxs)("span",{className:"text-ctp-overlay0 text-2xs",children:["[",e.model,"]"]})]}),(0,t.jsxs)("div",{className:"pl-4 text-sm text-ctp-text whitespace-pre-wrap break-words",children:[e.content,e.streaming&&(0,t.jsx)("span",{className:"inline-block w-2 h-4 ml-0.5 bg-ctp-green animate-pulse"})]}),e.usage&&(0,t.jsxs)("div",{className:"pl-4 mt-1 text-2xs text-ctp-overlay0",children:[e.usage.totalTokens," tokens"]})]})}var l=e.i(32372);function r({messages:e}){let n=(0,s.useRef)(null);return((0,s.useEffect)(()=>{n.current?.scrollIntoView({behavior:"smooth"})},[e]),e.length)?(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto px-4 py-3 font-mono",children:[e.map(e=>(0,t.jsx)(a,{message:e},e.id)),(0,t.jsx)("div",{ref:n})]}):(0,t.jsx)("div",{className:"flex-1 flex items-center justify-center h-full",children:(0,t.jsx)(l.EmptyState,{message:"$ Type a command to begin..."})})}function o({onSend:e,disabled:n}){let[a,l]=(0,s.useState)(""),r=(0,s.useRef)(null),o=(0,s.useCallback)(()=>{let t=a.trim();t&&!n&&(e(t),l(""),r.current&&(r.current.style.height="auto"))},[a,n,e]),c=(0,s.useCallback)(e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),o())},[o]),i=(0,s.useCallback)(()=>{r.current&&(r.current.style.height="auto",r.current.style.height=`${Math.min(r.current.scrollHeight,200)}px`)},[]);return(0,t.jsxs)("div",{className:"flex items-end gap-2 px-4 py-2 font-mono",children:[(0,t.jsx)("span",{className:"text-ctp-green text-sm py-1.5 select-none",children:"$"}),(0,t.jsx)("textarea",{ref:r,value:a,onChange:e=>{l(e.target.value),i()},onKeyDown:c,placeholder:"Enter command...",rows:1,disabled:n,className:"flex-1 bg-transparent text-sm text-ctp-text placeholder:text-ctp-overlay0 resize-none focus:outline-none disabled:opacity-40 min-h-[36px] max-h-[200px] font-mono"}),(0,t.jsx)("button",{onClick:o,disabled:n||!a.trim(),className:"px-3 py-1.5 rounded-input bg-ctp-blue text-ctp-crust text-xs font-mono font-medium hover:bg-ctp-lavender disabled:opacity-40 disabled:cursor-not-allowed transition-colors shrink-0",children:"send"})]})}function c({agents:e,selectedId:s,onSelect:n}){return(0,t.jsxs)("div",{className:"flex items-center gap-2 font-mono",children:[(0,t.jsx)("label",{className:"text-xs text-ctp-overlay0",children:"target:"}),(0,t.jsxs)("select",{value:s||"",onChange:e=>n(e.target.value||null),className:"bg-ctp-surface0 border border-ctp-surface1 rounded-input px-2 py-1 text-xs text-ctp-text focus:outline-none focus:border-ctp-blue/50 transition-colors",children:[(0,t.jsx)("option",{value:"",className:"bg-ctp-mantle",children:"Direct LLM"}),e.map(e=>(0,t.jsxs)("option",{value:e.id,className:"bg-ctp-mantle",children:[e.name||e.id," (",e.externalId||e.id,")"]},e.id))]})]})}var i=e.i(43332),d=e.i(24876),x=e.i(633);function m(){let{status:e}=(0,d.useWebSocket)(),{messages:a,streaming:l,sendMessage:m,clearMessages:u}=function(){let{sendStreamingChat:e,sendAgentTask:t,operatorAgentId:n}=(0,d.useWebSocket)(),[a,l]=(0,s.useState)([]),[r,o]=(0,s.useState)(!1),c=(0,s.useCallback)(async(s,r)=>{let c={id:`user-${Date.now()}`,role:"user",content:s,timestamp:new Date().toLocaleTimeString()};l(e=>[...e,c]);let i=`assistant-${Date.now()}`,d={id:i,role:"assistant",content:"",streaming:!0,timestamp:new Date().toLocaleTimeString(),agentName:r?.agentName};l(e=>[...e,d]),o(!0);try{let o=r?.agentId||n;if(o){let e=await t(o,{type:"chat",messages:[{role:"user",content:s}]});l(t=>t.map(t=>t.id===i?{...t,content:e?.content||"No response",model:e?.model,streaming:!1}:t))}else{let t=[...a.filter(e=>!e.streaming).map(e=>({role:e.role,content:e.content})),{role:"user",content:s}],n=await e(t,e=>{l(t=>t.map(t=>t.id===i?{...t,content:t.content+e}:t))},{model:r?.model});l(e=>e.map(e=>e.id===i?{...e,content:n.content,model:n.model,usage:n.usage,streaming:!1}:e))}}catch(e){l(t=>t.map(t=>t.id===i?{...t,content:`Error: ${e instanceof Error?e.message:"Unknown error"}`,streaming:!1}:t))}finally{o(!1)}},[a,e,t,n]);return{messages:a,streaming:r,sendMessage:c,clearMessages:(0,s.useCallback)(()=>{l([])},[])}}(),{agents:p}=(0,x.useAgents)(),[h,g]=(0,s.useState)(null),b=p.find(e=>e.id===h);return(0,t.jsx)(n.Window,{title:"Terminal",icon:(0,t.jsxs)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[(0,t.jsx)("polyline",{points:"4 17 10 11 4 5"}),(0,t.jsx)("line",{x1:"12",y1:"19",x2:"20",y2:"19"})]}),noPadding:!0,className:"h-full",children:(0,t.jsxs)("div",{className:"flex flex-col h-full terminal-bg",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between px-3 py-2 border-b border-ctp-surface0 bg-ctp-crust/50",children:[(0,t.jsx)(c,{agents:p,selectedId:h,onSelect:g}),a.length>0&&(0,t.jsx)(i.Button,{variant:"ghost",onClick:u,className:"text-xs",children:"clear"})]}),(0,t.jsx)("div",{className:"flex-1 overflow-hidden",children:(0,t.jsx)(r,{messages:a})}),(0,t.jsx)("div",{className:"border-t border-ctp-surface0",children:(0,t.jsx)(o,{onSend:e=>{m(e,{agentId:h||void 0,agentName:b?.name})},disabled:"connected"!==e||l})})]})})}e.s(["default",()=>m],71798)}]);