(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,23889,e=>{"use strict";var t=e.i(87433),s=e.i(44440),r=e.i(62924);function a({title:e,icon:a,children:c,className:l,noPadding:n}){let i=(0,r.useRouter)(),[o,d]=(0,s.useState)(!1);return(0,t.jsxs)("div",{className:`flex flex-col bg-ctp-mantle border border-ctp-surface0 rounded-window shadow-lg shadow-black/20 overflow-hidden ${l??""}`,children:[(0,t.jsxs)("div",{className:"window-titlebar shrink-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1.5 mr-2",children:[(0,t.jsx)("button",{onClick:()=>i.push("/"),className:"w-3 h-3 rounded-full bg-ctp-red hover:brightness-110 transition-all",title:"Close — go to desktop"}),(0,t.jsx)("button",{onClick:()=>d(!o),className:"w-3 h-3 rounded-full bg-ctp-yellow hover:brightness-110 transition-all",title:o?"Restore":"Minimize"}),(0,t.jsx)("button",{onClick:()=>d(!1),className:"w-3 h-3 rounded-full bg-ctp-green hover:brightness-110 transition-all",title:"Maximize"})]}),a&&(0,t.jsx)("span",{className:"text-ctp-subtext0",children:a}),(0,t.jsx)("span",{className:"text-xs font-mono font-medium text-ctp-subtext1 truncate",children:e})]}),!o&&(0,t.jsx)("div",{className:`flex-1 overflow-auto ${n?"":"p-4"}`,children:c}),o&&(0,t.jsx)("div",{className:"px-4 py-6 text-center",children:(0,t.jsx)("button",{onClick:()=>d(!1),className:"text-xs font-mono text-ctp-overlay0 hover:text-ctp-text transition-colors",children:"Click to restore window"})})]})}e.s(["Window",()=>a])},32372,e=>{"use strict";var t=e.i(87433);function s({message:e,hint:s,className:r=""}){return(0,t.jsxs)("div",{className:`py-8 text-center font-mono ${r}`,children:[(0,t.jsx)("div",{className:"text-sm text-ctp-overlay0",children:e}),s&&(0,t.jsx)("div",{className:"text-xs text-ctp-overlay0/70 mt-1",children:s})]})}e.s(["EmptyState",()=>s])},43332,e=>{"use strict";var t=e.i(87433);let s={primary:"bg-ctp-blue text-ctp-crust font-medium hover:bg-ctp-lavender active:bg-ctp-sapphire",ghost:"bg-ctp-surface0 text-ctp-subtext1 hover:bg-ctp-surface1 hover:text-ctp-text active:bg-ctp-surface2",danger:"bg-ctp-red/15 text-ctp-red hover:bg-ctp-red/25 active:bg-ctp-red/35"};function r({variant:e="primary",children:r,className:a="",disabled:c,...l}){return(0,t.jsx)("button",{className:`px-4 py-2 rounded-input text-sm transition-colors duration-150 cursor-pointer disabled:opacity-40 disabled:cursor-not-allowed ${s[e]} ${a}`,disabled:c,...l,children:r})}e.s(["Button",()=>r])},4457,59913,e=>{"use strict";var t=e.i(87433);function s({children:e,className:s=""}){return(0,t.jsx)("div",{className:`os-panel p-4 ${s}`,children:e})}e.s(["Panel",()=>s],4457);let r={default:"bg-ctp-surface1 text-ctp-subtext1",success:"bg-ctp-green/15 text-ctp-green",warning:"bg-ctp-yellow/15 text-ctp-yellow",danger:"bg-ctp-red/15 text-ctp-red",info:"bg-ctp-blue/15 text-ctp-blue"};function a({children:e,variant:s="default",className:a=""}){return(0,t.jsx)("span",{className:`inline-flex items-center px-2.5 py-0.5 text-xs font-mono font-medium rounded-pill ${r[s]} ${a}`,children:e})}e.s(["Tag",()=>a],59913)},51339,e=>{"use strict";var t=e.i(87433);function s({label:e,className:s="",id:r,...a}){let c=r||e?.toLowerCase().replace(/\s+/g,"-");return(0,t.jsxs)("div",{className:"flex flex-col gap-1.5",children:[e&&(0,t.jsx)("label",{htmlFor:c,className:"text-xs text-ctp-subtext0 font-medium",children:e}),(0,t.jsx)("input",{id:c,className:`bg-ctp-surface0 border border-ctp-surface1 rounded-input px-3 py-2 text-sm text-ctp-text placeholder:text-ctp-overlay0 focus:outline-none focus:border-ctp-blue/50 focus:ring-1 focus:ring-ctp-blue/20 transition-colors ${s}`,...a})]})}e.s(["Input",()=>s])},58238,e=>{"use strict";var t=e.i(87433),s=e.i(44440),r=e.i(23889),a=e.i(4457),c=e.i(51339),l=e.i(43332);let n=["semantic","episodic","procedural"],i={semantic:"border-ctp-blue bg-ctp-blue/15 text-ctp-blue",episodic:"border-ctp-mauve bg-ctp-mauve/15 text-ctp-mauve",procedural:"border-ctp-green bg-ctp-green/15 text-ctp-green"};function o({onSearch:e,loading:r,activeType:a}){let[o,d]=(0,s.useState)(""),[p,x]=(0,s.useState)(new Set),u=(0,s.useCallback)(e=>{x(t=>{let s=new Set(t);return s.has(e)?s.delete(e):s.add(e),s})},[]),m=(0,s.useCallback)(t=>{if(t.preventDefault(),!o.trim())return;let s=p.size>0?[...p]:void 0;e(o.trim(),s)},[o,p,e]);return(0,t.jsxs)("form",{onSubmit:m,className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsx)(c.Input,{value:o,onChange:e=>d(e.target.value),placeholder:"Search memory..."})}),(0,t.jsx)(l.Button,{type:"submit",disabled:r||!o.trim(),children:r?"Searching...":"Search"})]}),(0,t.jsxs)("div",{className:"flex gap-2 items-center",children:[n.map(e=>(0,t.jsx)("button",{type:"button",onClick:()=>u(e),className:`px-3 py-1 text-xs font-mono rounded-pill border transition-colors ${p.has(e)||a===e?i[e]:"border-ctp-surface1 text-ctp-overlay0 hover:text-ctp-subtext1"}`,children:e},e)),a&&(0,t.jsx)("span",{className:"text-2xs text-ctp-overlay0 font-mono ml-1",children:"(filtered via sidebar)"})]})]})}var d=e.i(59913);let p={semantic:"border-ctp-blue",episodic:"border-ctp-mauve",procedural:"border-ctp-green"};function x({memory:e}){return(0,t.jsxs)("div",{className:`border-l-2 ${p[e.type]||"border-ctp-surface1"} pl-3 py-2`,children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,t.jsx)(d.Tag,{variant:"semantic"===e.type?"info":"episodic"===e.type?"default":"success",children:e.type}),(0,t.jsxs)("span",{className:"text-2xs text-ctp-overlay0 font-mono tabular-nums",children:["score: ","number"==typeof e.score?e.score.toFixed(2):"—"]}),void 0!==e.importance&&(0,t.jsxs)("span",{className:"text-2xs text-ctp-overlay0 font-mono tabular-nums",children:["imp: ",e.importance]})]}),(0,t.jsx)("div",{className:"text-sm text-ctp-subtext1 mb-1",children:e.content}),e.tags&&e.tags.length>0&&(0,t.jsx)("div",{className:"flex flex-wrap gap-1",children:e.tags.map(e=>(0,t.jsx)("span",{className:"text-2xs px-1.5 py-0.5 rounded bg-ctp-surface0 text-ctp-overlay1 font-mono",children:e},e))})]})}var u=e.i(32372);function m({results:e,loading:s}){return s?(0,t.jsx)("div",{className:"py-8 text-center",children:(0,t.jsx)("div",{className:"inline-block w-4 h-4 rounded-full border-2 border-ctp-blue/30 border-t-ctp-blue animate-spin"})}):e.length?(0,t.jsx)("div",{className:"space-y-1",children:e.map((e,s)=>(0,t.jsx)(x,{memory:e},`${e.type}-${s}`))}):(0,t.jsx)(u.EmptyState,{message:"No memories found. Try a different query."})}function h({onStore:e}){let[r,a]=(0,s.useState)(!1),[n,i]=(0,s.useState)(""),[o,d]=(0,s.useState)(""),[p,x]=(0,s.useState)(""),[u,m]=(0,s.useState)("0.5"),[h,b]=(0,s.useState)(!1),[v,f]=(0,s.useState)(null),g=(0,s.useCallback)(async t=>{if(t.preventDefault(),n.trim()&&o.trim()){b(!0),f(null);try{await e({category:n.trim(),fact:o.trim(),tags:p.split(",").map(e=>e.trim()).filter(Boolean),importance:Number(u)||.5}),f("Fact stored successfully"),d("")}catch(e){f(`Error: ${e instanceof Error?e.message:"Store failed"}`)}finally{b(!1)}}},[n,o,p,u,e]);return(0,t.jsxs)("div",{className:"os-panel",children:[(0,t.jsxs)("button",{onClick:()=>a(!r),className:"w-full px-3 py-2 flex items-center justify-between text-xs text-ctp-overlay1 hover:text-ctp-text transition-colors font-mono",children:[(0,t.jsx)("span",{children:"+ Store new fact"}),(0,t.jsx)("span",{className:"text-ctp-overlay0",children:r?"−":"+"})]}),r&&(0,t.jsxs)("form",{onSubmit:g,className:"px-3 pb-3 space-y-3",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsx)(c.Input,{label:"Category",value:n,onChange:e=>i(e.target.value),placeholder:"e.g. user-preferences"}),(0,t.jsx)(c.Input,{label:"Tags (comma-separated)",value:p,onChange:e=>x(e.target.value),placeholder:"e.g. prefs, ui"})]}),(0,t.jsx)(c.Input,{label:"Fact",value:o,onChange:e=>d(e.target.value),placeholder:"e.g. User prefers dark mode"}),(0,t.jsxs)("div",{className:"flex items-end gap-3",children:[(0,t.jsx)("div",{className:"w-32",children:(0,t.jsx)(c.Input,{label:"Importance (0-1)",type:"number",value:u,onChange:e=>m(e.target.value),min:"0",max:"1",step:"0.1"})}),(0,t.jsx)(l.Button,{type:"submit",disabled:h||!o.trim(),children:h?"Storing...":"Store"})]}),v&&(0,t.jsx)("div",{className:`text-xs font-mono ${v.startsWith("Error")?"text-ctp-red":"text-ctp-green"}`,children:v})]})]})}var b=e.i(24876);let v=[{id:"semantic",label:"Semantic",active:"text-ctp-blue bg-ctp-blue/10 font-medium",inactive:"text-ctp-overlay1 hover:text-ctp-blue hover:bg-ctp-blue/5",iconActive:"text-ctp-blue",icon:(0,t.jsxs)("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,t.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,t.jsx)("path",{d:"M12 16v-4M12 8h.01"})]})},{id:"episodic",label:"Episodic",active:"text-ctp-mauve bg-ctp-mauve/10 font-medium",inactive:"text-ctp-overlay1 hover:text-ctp-mauve hover:bg-ctp-mauve/5",iconActive:"text-ctp-mauve",icon:(0,t.jsxs)("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,t.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,t.jsx)("polyline",{points:"12 6 12 12 16 14"})]})},{id:"procedural",label:"Procedural",active:"text-ctp-green bg-ctp-green/10 font-medium",inactive:"text-ctp-overlay1 hover:text-ctp-green hover:bg-ctp-green/5",iconActive:"text-ctp-green",icon:(0,t.jsxs)("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,t.jsx)("polyline",{points:"4 17 10 11 4 5"}),(0,t.jsx)("line",{x1:"12",y1:"19",x2:"20",y2:"19"})]})}];function f(){let{results:e,loading:c,error:l,search:n,storeFact:i}=function(){let{sendAgentTask:e,operatorAgentId:t}=(0,b.useWebSocket)(),[r,a]=(0,s.useState)([]),[c,l]=(0,s.useState)(!1),[n,i]=(0,s.useState)(null);return{results:r,loading:c,error:n,search:(0,s.useCallback)(async(s,r,c)=>{if(!t)return void i("Set an operator agent in Settings first");l(!0),i(null);try{let l=await e(t,{type:"search_memory",query:s,...r?.length&&{types:r},...c&&{limit:c}});a(l?.memories??[])}catch(e){i(e instanceof Error?e.message:"Search failed"),a([])}finally{l(!1)}},[e,t]),storeFact:(0,s.useCallback)(async s=>{if(!t)throw Error("Set an operator agent in Settings first");await e(t,{type:"store_fact",...s})},[e,t])}}(),[d,p]=(0,s.useState)(null),x=(0,s.useCallback)(e=>{p(t=>t===e?null:e)},[]),u=(0,s.useCallback)((e,t)=>{n(e,d?[d]:t)},[d,n]);return(0,t.jsx)(r.Window,{title:"File Manager — Memory",icon:(0,t.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:(0,t.jsx)("path",{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"})}),className:"h-full",children:(0,t.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4 h-full",children:[(0,t.jsxs)("div",{className:"lg:w-48 shrink-0",children:[(0,t.jsxs)(a.Panel,{className:"space-y-1",children:[(0,t.jsx)("h2",{className:"text-xs font-mono font-semibold text-ctp-subtext0 uppercase tracking-wider mb-2",children:"Memory Types"}),v.map(e=>{let s=d===e.id;return(0,t.jsxs)("button",{onClick:()=>x(e.id),className:`w-full flex items-center gap-2 px-2 py-1.5 rounded-input text-xs font-mono transition-colors text-left ${s?e.active:e.inactive}`,children:[(0,t.jsx)("span",{className:s?e.iconActive:"text-ctp-overlay0",children:e.icon}),e.label,s&&(0,t.jsx)("span",{className:"ml-auto text-2xs text-ctp-overlay0",children:"✕"})]},e.id)})]}),(0,t.jsx)("div",{className:"mt-3",children:(0,t.jsx)(h,{onStore:i})})]}),(0,t.jsx)("div",{className:"flex-1 min-w-0",children:(0,t.jsxs)(a.Panel,{children:[(0,t.jsx)(o,{onSearch:u,loading:c,activeType:d}),l&&(0,t.jsx)("div",{className:"mt-2 text-xs text-ctp-red font-mono",children:l}),(0,t.jsx)("div",{className:"mt-4",children:(0,t.jsx)(m,{results:e,loading:c})})]})})]})})}e.s(["default",()=>f],58238)}]);