(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,4457,59913,e=>{"use strict";var t=e.i(87433);function s({children:e,className:s=""}){return(0,t.jsx)("div",{className:`os-panel p-4 ${s}`,children:e})}e.s(["Panel",()=>s],4457);let n={default:"bg-ctp-surface1 text-ctp-subtext1",success:"bg-ctp-green/15 text-ctp-green",warning:"bg-ctp-yellow/15 text-ctp-yellow",danger:"bg-ctp-red/15 text-ctp-red",info:"bg-ctp-blue/15 text-ctp-blue"};function l({children:e,variant:s="default",className:l=""}){return(0,t.jsx)("span",{className:`inline-flex items-center px-2.5 py-0.5 text-xs font-mono font-medium rounded-pill ${n[s]} ${l}`,children:e})}e.s(["Tag",()=>l],59913)},23889,e=>{"use strict";var t=e.i(87433),s=e.i(44440),n=e.i(62924);function l({title:e,icon:l,children:a,className:r,noPadding:o}){let c=(0,n.useRouter)(),[i,x]=(0,s.useState)(!1);return(0,t.jsxs)("div",{className:`flex flex-col bg-ctp-mantle border border-ctp-surface0 rounded-window shadow-lg shadow-black/20 overflow-hidden ${r??""}`,children:[(0,t.jsxs)("div",{className:"window-titlebar shrink-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1.5 mr-2",children:[(0,t.jsx)("button",{onClick:()=>c.push("/"),className:"w-3 h-3 rounded-full bg-ctp-red hover:brightness-110 transition-all",title:"Close — go to desktop"}),(0,t.jsx)("button",{onClick:()=>x(!i),className:"w-3 h-3 rounded-full bg-ctp-yellow hover:brightness-110 transition-all",title:i?"Restore":"Minimize"}),(0,t.jsx)("button",{onClick:()=>x(!1),className:"w-3 h-3 rounded-full bg-ctp-green hover:brightness-110 transition-all",title:"Maximize"})]}),l&&(0,t.jsx)("span",{className:"text-ctp-subtext0",children:l}),(0,t.jsx)("span",{className:"text-xs font-mono font-medium text-ctp-subtext1 truncate",children:e})]}),!i&&(0,t.jsx)("div",{className:`flex-1 overflow-auto ${o?"":"p-4"}`,children:a}),i&&(0,t.jsx)("div",{className:"px-4 py-6 text-center",children:(0,t.jsx)("button",{onClick:()=>x(!1),className:"text-xs font-mono text-ctp-overlay0 hover:text-ctp-text transition-colors",children:"Click to restore window"})})]})}e.s(["Window",()=>l])},32372,e=>{"use strict";var t=e.i(87433);function s({message:e,hint:s,className:n=""}){return(0,t.jsxs)("div",{className:`py-8 text-center font-mono ${n}`,children:[(0,t.jsx)("div",{className:"text-sm text-ctp-overlay0",children:e}),s&&(0,t.jsx)("div",{className:"text-xs text-ctp-overlay0/70 mt-1",children:s})]})}e.s(["EmptyState",()=>s])},89673,e=>{"use strict";var t=e.i(87433),s=e.i(70065),n=e.i(23889),l=e.i(4457),a=e.i(59913);function r({health:e,agentCount:n,loading:r}){let o=e?.status==="healthy"?"success":e?.status==="offline"?"danger":"warning";return(0,t.jsx)(s.default,{href:"/settings",className:"block group",children:(0,t.jsxs)(l.Panel,{className:"transition-colors group-hover:border-ctp-blue/30",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsx)("h2",{className:"text-xs font-mono font-semibold text-ctp-subtext0 uppercase tracking-wider",children:"Gateway Status"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[r&&(0,t.jsx)("div",{className:"w-3 h-3 rounded-full border-2 border-ctp-blue/30 border-t-ctp-blue animate-spin"}),(0,t.jsx)("span",{className:"text-2xs font-mono text-ctp-overlay0 group-hover:text-ctp-blue transition-colors",children:"Settings →"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-xs text-ctp-overlay0 font-mono mb-1",children:"status"}),(0,t.jsx)(a.Tag,{variant:o,children:e?.status||"unknown"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-xs text-ctp-overlay0 font-mono mb-1",children:"providers"}),(0,t.jsx)("div",{className:"text-lg font-mono font-bold text-ctp-text tabular-nums",children:e?.providers?.length??"—"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-xs text-ctp-overlay0 font-mono mb-1",children:"agents"}),(0,t.jsx)("div",{className:"text-lg font-mono font-bold text-ctp-text tabular-nums",children:n})]})]})]})})}function o({label:e,value:s,rawValue:n,color:l}){let a=n<=0?0:Math.min(100,Math.max(2,Math.log10(n+1)/6*100));return(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,t.jsx)("span",{className:"text-xs text-ctp-overlay0 font-mono",children:e}),(0,t.jsx)("span",{className:"text-xs font-mono font-medium text-ctp-subtext1 tabular-nums",children:s})]}),(0,t.jsx)("div",{className:"h-1.5 rounded-full bg-ctp-surface0 overflow-hidden",children:(0,t.jsx)("div",{className:"h-full rounded-full transition-all duration-500 ease-out",style:{width:`${a}%`,background:l}})})]})}var c=e.i(44440),i=e.i(32372);function x({events:e}){let[s,n]=(0,c.useState)(null);return e.length?(0,t.jsx)("div",{className:"space-y-1 max-h-80 overflow-y-auto pr-1 font-mono",children:e.map((e,l)=>{var a;let r=s===l,o=(e.summary?.length??0)>80;return(0,t.jsxs)("button",{onClick:()=>n(r?null:l),className:`w-full text-left border-l-2 ${"error"===(a=e.type)?"border-ctp-red":"auth"===a?"border-ctp-yellow":"connection"===a?"border-ctp-green":"border-ctp-blue/30"} pl-3 py-1 hover:bg-ctp-surface0/30 rounded-r-input transition-colors`,children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-xs font-medium text-ctp-subtext1",children:e.type}),(0,t.jsx)("span",{className:"text-2xs text-ctp-overlay0",children:e.timestamp}),e.channel&&(0,t.jsx)("span",{className:"text-2xs text-ctp-overlay0 ml-auto",children:e.channel})]}),e.summary&&(0,t.jsx)("div",{className:`text-xs text-ctp-overlay1 mt-0.5 break-all ${r?"":"line-clamp-2"}`,children:e.summary}),o&&(0,t.jsx)("span",{className:"text-2xs text-ctp-overlay0 hover:text-ctp-blue",children:r?"collapse":"expand"})]},`${e.timestamp}-${l}`)})}):(0,t.jsx)(i.EmptyState,{message:"Waiting for events..."})}var d=e.i(44814);function u(e,t){let s=e.match(RegExp(`${t} ([0-9.]+)`));return s?Number(s[1]):0}var m=e.i(24876),p=e.i(633);function h(){let{health:e,metrics:i,loading:h,refresh:f}=function(){let[e,t]=(0,c.useState)(null),[s,n]=(0,c.useState)(null),[l,a]=(0,c.useState)(!0),r=(0,c.useCallback)(async()=>{try{let e=await fetch((0,d.getHealthUrl)());if(!e.ok)return void t({status:"offline"});let s=await e.json();t(s)}catch{t({status:"offline"})}},[]),o=(0,c.useCallback)(async()=>{try{let e=await fetch((0,d.getMetricsUrl)());if(!e.ok)return void n(null);let t=await e.text();n({inputTokens:u(t,"agent_os_tokens_input_total"),outputTokens:u(t,"agent_os_tokens_output_total"),costUsd:u(t,"agent_os_cost_usd_total")})}catch{n(null)}},[]),i=(0,c.useCallback)(async()=>{a(!0),await Promise.all([r(),o()]),a(!1)},[r,o]);return(0,c.useEffect)(()=>{i();let e=setInterval(i,15e3);return()=>clearInterval(e)},[i]),{health:e,metrics:s,loading:l,refresh:i}}(),{events:b}=function(){let{events:e}=(0,m.useWebSocket)();return{events:e}}(),{agents:v}=(0,p.useAgents)(),g=v.reduce((e,t)=>(e[t.state]=(e[t.state]||0)+1,e),{});return(0,t.jsxs)(n.Window,{title:"System Monitor",icon:(0,t.jsxs)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[(0,t.jsx)("rect",{x:"2",y:"3",width:"20",height:"14",rx:"2"}),(0,t.jsx)("path",{d:"M8 21h8M12 17v4"})]}),className:"h-full",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 mb-4",children:[(0,t.jsx)(r,{health:e,agentCount:v.length,loading:h}),(0,t.jsxs)(l.Panel,{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsx)("h2",{className:"text-xs font-mono font-semibold text-ctp-subtext0 uppercase tracking-wider",children:"Runtime Metrics"}),(0,t.jsx)("button",{onClick:f,className:"text-xs text-ctp-overlay0 hover:text-ctp-blue transition-colors font-mono underline decoration-ctp-surface1 hover:decoration-ctp-blue",children:"refresh"})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(o,{label:"Input Tokens",value:i?.inputTokens.toLocaleString()??"—",rawValue:i?.inputTokens??0,color:"#89b4fa"}),(0,t.jsx)(o,{label:"Output Tokens",value:i?.outputTokens.toLocaleString()??"—",rawValue:i?.outputTokens??0,color:"#cba6f7"}),(0,t.jsx)(o,{label:"Cost",value:i?`$${i.costUsd.toFixed(4)}`:"—",rawValue:i?.costUsd??0,color:"#a6e3a1"})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[(0,t.jsx)(s.default,{href:"/agents",className:"block group",children:(0,t.jsxs)(l.Panel,{className:"h-full transition-colors group-hover:border-ctp-blue/30",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsx)("h2",{className:"text-xs font-mono font-semibold text-ctp-subtext0 uppercase tracking-wider",children:"Processes"}),(0,t.jsx)("span",{className:"text-2xs font-mono text-ctp-overlay0 group-hover:text-ctp-blue transition-colors",children:"Open Task Manager →"})]}),0===v.length?(0,t.jsxs)("div",{className:"text-sm text-ctp-overlay0 font-mono",children:["No agents running."," ",(0,t.jsx)("span",{className:"text-ctp-blue/70 group-hover:text-ctp-blue",children:"Click to start one."})]}):(0,t.jsx)("div",{className:"space-y-2",children:Object.entries(g).map(([e,s])=>(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(a.Tag,{variant:"running"===e?"success":"error"===e?"danger":"ready"===e?"info":"default",children:e}),(0,t.jsx)("span",{className:"text-sm font-mono font-bold text-ctp-text tabular-nums",children:s})]},e))})]})}),(0,t.jsxs)(l.Panel,{className:"lg:col-span-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsx)("h2",{className:"text-xs font-mono font-semibold text-ctp-subtext0 uppercase tracking-wider",children:"Event Log"}),b.length>0&&(0,t.jsxs)("span",{className:"text-2xs font-mono text-ctp-overlay0 tabular-nums",children:[b.length," events"]})]}),(0,t.jsx)(x,{events:b})]})]})]})}e.s(["default",()=>h],89673)}]);